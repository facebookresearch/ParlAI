<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ParlAI: parlai.core.torch_ranker_agent.TorchRankerAgent Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ParlAI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>parlai</b></li><li class="navelem"><b>core</b></li><li class="navelem"><b>torch_ranker_agent</b></li><li class="navelem"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html">TorchRankerAgent</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">parlai.core.torch_ranker_agent.TorchRankerAgent Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for parlai.core.torch_ranker_agent.TorchRankerAgent:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent__inherit__graph.png" border="0" usemap="#parlai_8core_8torch__ranker__agent_8TorchRankerAgent_inherit__map" alt="Inheritance graph"/></div>
<map name="parlai_8core_8torch__ranker__agent_8TorchRankerAgent_inherit__map" id="parlai_8core_8torch__ranker__agent_8TorchRankerAgent_inherit__map">
<area shape="rect" title=" " alt="" coords="528,199,703,241"/>
<area shape="rect" href="classparlai_1_1agents_1_1bert__ranker_1_1bi__encoder__ranker_1_1BiEncoderRankerAgent.html" title=" " alt="" coords="787,5,966,61"/>
<area shape="rect" href="classparlai_1_1agents_1_1bert__ranker_1_1cross__encoder__ranker_1_1CrossEncoderRankerAgent.html" title=" " alt="" coords="763,85,991,141"/>
<area shape="rect" href="classparlai_1_1agents_1_1memnn_1_1memnn_1_1MemnnAgent.html" title=" " alt="" coords="779,166,974,207"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1crossencoder_1_1CrossencoderAgent.html" title=" " alt="" coords="751,231,1003,273"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1polyencoder_1_1PolyencoderAgent.html" title=" " alt="" coords="755,297,999,338"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1transformer_1_1TransformerRankerAgent.html" title=" " alt="" coords="757,362,997,403"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html" title=" " alt="" coords="321,199,480,241"/>
<area shape="rect" title=" " alt="" coords="167,181,217,208"/>
<area shape="rect" href="classparlai_1_1core_1_1agents_1_1Agent.html" title=" " alt="" coords="111,232,273,259"/>
<area shape="rect" title=" " alt="" coords="5,232,63,259"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1biencoder_1_1BiencoderAgent.html" title=" " alt="" coords="1063,297,1294,338"/>
<area shape="rect" href="classself__feeding_1_1self__feeding__agent_1_1SelfFeedingAgent.html" title=" " alt="" coords="1095,362,1263,403"/>
<area shape="rect" href="classwizard__transformer__ranker_1_1wizard__transformer__ranker_1_1WizardTransformerRankerAgent.html" title=" " alt="" coords="1051,428,1307,484"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for parlai.core.torch_ranker_agent.TorchRankerAgent:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent__coll__graph.png" border="0" usemap="#parlai_8core_8torch__ranker__agent_8TorchRankerAgent_coll__map" alt="Collaboration graph"/></div>
<map name="parlai_8core_8torch__ranker__agent_8TorchRankerAgent_coll__map" id="parlai_8core_8torch__ranker__agent_8TorchRankerAgent_coll__map">
<area shape="rect" title=" " alt="" coords="74,276,249,317"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html" title=" " alt="" coords="82,185,241,227"/>
<area shape="rect" title=" " alt="" coords="5,81,56,108"/>
<area shape="rect" href="classparlai_1_1core_1_1agents_1_1Agent.html" title=" " alt="" coords="80,81,243,108"/>
<area shape="rect" title=" " alt="" coords="133,5,190,32"/>
<area shape="rect" title=" " alt="" coords="267,81,322,108"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8b16043428bbb29ee4a3ed28c2bbb472"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a8b16043428bbb29ee4a3ed28c2bbb472">add_cmdline_args</a> (cls, argparser)</td></tr>
<tr class="separator:a8b16043428bbb29ee4a3ed28c2bbb472"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acde404a79bf3678bb52d3e6c3ee5244a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#acde404a79bf3678bb52d3e6c3ee5244a">__init__</a> (self, opt, shared=None)</td></tr>
<tr class="separator:acde404a79bf3678bb52d3e6c3ee5244a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16d004a75c5fee42cd13db4abe157b98"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a16d004a75c5fee42cd13db4abe157b98">build_criterion</a> (self)</td></tr>
<tr class="separator:a16d004a75c5fee42cd13db4abe157b98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b90f2718c85b6373ead4cd207cfd3d8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a9b90f2718c85b6373ead4cd207cfd3d8">set_interactive_mode</a> (self, mode, shared=False)</td></tr>
<tr class="separator:a9b90f2718c85b6373ead4cd207cfd3d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a936cebe646816609dd1d4f56b9490d45"><td class="memItemLeft" align="right" valign="top"><a id="a936cebe646816609dd1d4f56b9490d45"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>get_task_candidates_path</b> (self)</td></tr>
<tr class="separator:a936cebe646816609dd1d4f56b9490d45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65d5726a4e2098212298bc2cdf13e70f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a65d5726a4e2098212298bc2cdf13e70f">score_candidates</a> (self, batch, cand_vecs, cand_encs=None)</td></tr>
<tr class="separator:a65d5726a4e2098212298bc2cdf13e70f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a80c3eb68b019859da2a83706c3844d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a3a80c3eb68b019859da2a83706c3844d">is_valid</a> (self, obs)</td></tr>
<tr class="separator:a3a80c3eb68b019859da2a83706c3844d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05ddf921f386f21116ec0ef50796987a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a05ddf921f386f21116ec0ef50796987a">train_step</a> (self, batch)</td></tr>
<tr class="separator:a05ddf921f386f21116ec0ef50796987a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65bca7841123e4c3df1e09f8c4eb397f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a65bca7841123e4c3df1e09f8c4eb397f">eval_step</a> (self, batch)</td></tr>
<tr class="separator:a65bca7841123e4c3df1e09f8c4eb397f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a628050d71339298baafbaf678f94207d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a628050d71339298baafbaf678f94207d">block_repeats</a> (self, cand_preds)</td></tr>
<tr class="separator:a628050d71339298baafbaf678f94207d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ba5899b6497645bb6d406ecc2441da7"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a9ba5899b6497645bb6d406ecc2441da7">share</a> (self)</td></tr>
<tr class="separator:a9ba5899b6497645bb6d406ecc2441da7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab526b2171567fd980451a795bb639cda"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#ab526b2171567fd980451a795bb639cda">reset_metrics</a> (self)</td></tr>
<tr class="separator:ab526b2171567fd980451a795bb639cda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6314748dfa9aaf6e26145af686d5787d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a6314748dfa9aaf6e26145af686d5787d">report</a> (self)</td></tr>
<tr class="separator:a6314748dfa9aaf6e26145af686d5787d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41c604613a97e566bfcc31667d0dfc6a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a41c604613a97e566bfcc31667d0dfc6a">set_vocab_candidates</a> (self, shared)</td></tr>
<tr class="separator:a41c604613a97e566bfcc31667d0dfc6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9039757596f98b45b6676b16589883a3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a9039757596f98b45b6676b16589883a3">set_fixed_candidates</a> (self, shared)</td></tr>
<tr class="separator:a9039757596f98b45b6676b16589883a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a353991d201d8889c453bf72c15ec78a9"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a353991d201d8889c453bf72c15ec78a9">load_candidates</a> (self, path, cand_type='vectors')</td></tr>
<tr class="separator:a353991d201d8889c453bf72c15ec78a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c8e4925f558783a51a28ccb577c42c7"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a1c8e4925f558783a51a28ccb577c42c7">encode_candidates</a> (self, padded_cands)</td></tr>
<tr class="separator:a1c8e4925f558783a51a28ccb577c42c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2e2d618f056bb68089c7252fa07d07b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#af2e2d618f056bb68089c7252fa07d07b">vectorize_fixed_candidates</a> (self, cands_batch, add_start=False, add_end=False)</td></tr>
<tr class="separator:af2e2d618f056bb68089c7252fa07d07b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html">parlai.core.torch_agent.TorchAgent</a></td></tr>
<tr class="memitem:a9c622b8ed5a811841f30fe98cc297cde inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a9c622b8ed5a811841f30fe98cc297cde">optim_opts</a> (self)</td></tr>
<tr class="separator:a9c622b8ed5a811841f30fe98cc297cde inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bd9118252c602bb9d5a596ecae16717 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a0bd9118252c602bb9d5a596ecae16717">history_class</a> (cls)</td></tr>
<tr class="separator:a0bd9118252c602bb9d5a596ecae16717 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab22f61f153b522f429210c61eed2d5af inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#ab22f61f153b522f429210c61eed2d5af">build_history</a> (self)</td></tr>
<tr class="separator:ab22f61f153b522f429210c61eed2d5af inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a233316f9ec2805dd6a08fbf07f3a078a inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a233316f9ec2805dd6a08fbf07f3a078a">build_dictionary</a> (self)</td></tr>
<tr class="separator:a233316f9ec2805dd6a08fbf07f3a078a inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a21fa33fa5b2b928024fbc67826f233 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a9a21fa33fa5b2b928024fbc67826f233">build_model</a> (self)</td></tr>
<tr class="separator:a9a21fa33fa5b2b928024fbc67826f233 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3784f1ddaa6ffad009716910f3f36dd4 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a3784f1ddaa6ffad009716910f3f36dd4">init_optim</a> (self, params, optim_states=None, saved_optim_type=None)</td></tr>
<tr class="separator:a3784f1ddaa6ffad009716910f3f36dd4 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa51ac42dc34e3d2281a01cba78a96151 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#aa51ac42dc34e3d2281a01cba78a96151">build_lr_scheduler</a> (self, states=None, hard_reset=False)</td></tr>
<tr class="separator:aa51ac42dc34e3d2281a01cba78a96151 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02beaaedfa30463f9d0a97ea590b516f inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a02beaaedfa30463f9d0a97ea590b516f">receive_metrics</a> (self, metrics_dict)</td></tr>
<tr class="separator:a02beaaedfa30463f9d0a97ea590b516f inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48bb9b153353a0565ab7253dc1daef99 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a48bb9b153353a0565ab7253dc1daef99">vectorize</a> (self, obs, history, add_start=True, add_end=True, text_truncate=None, label_truncate=None)</td></tr>
<tr class="separator:a48bb9b153353a0565ab7253dc1daef99 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c5824776df0c6cf995984a5e7a3f433 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a4c5824776df0c6cf995984a5e7a3f433">batchify</a> (self, obs_batch, sort=False)</td></tr>
<tr class="separator:a4c5824776df0c6cf995984a5e7a3f433 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba56b961d929e5c5b5da9cf8bd331502 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#aba56b961d929e5c5b5da9cf8bd331502">match_batch</a> (self, batch_reply, valid_inds, output=None)</td></tr>
<tr class="separator:aba56b961d929e5c5b5da9cf8bd331502 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32921aa09a682ee752d4822a5f5ebbb4 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a32921aa09a682ee752d4822a5f5ebbb4">last_reply</a> (self, use_reply='label')</td></tr>
<tr class="separator:a32921aa09a682ee752d4822a5f5ebbb4 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87b18f0d6ab11be3c49375af072d0d33 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a87b18f0d6ab11be3c49375af072d0d33">observe</a> (self, observation)</td></tr>
<tr class="separator:a87b18f0d6ab11be3c49375af072d0d33 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f89e606931a4622a5c6a6f6b832235c inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a9f89e606931a4622a5c6a6f6b832235c">state_dict</a> (self)</td></tr>
<tr class="separator:a9f89e606931a4622a5c6a6f6b832235c inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adac7ee3db855786e8414e9f35fcb6e46 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#adac7ee3db855786e8414e9f35fcb6e46">save</a> (self, path=None)</td></tr>
<tr class="separator:adac7ee3db855786e8414e9f35fcb6e46 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dcfca62a677f8de97f09ce993258f84 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a5dcfca62a677f8de97f09ce993258f84">load_state_dict</a> (self, <a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a9f89e606931a4622a5c6a6f6b832235c">state_dict</a>)</td></tr>
<tr class="separator:a5dcfca62a677f8de97f09ce993258f84 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af626fc7d32fc9b0dfeec167a52353baf inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#af626fc7d32fc9b0dfeec167a52353baf">load</a> (self, path)</td></tr>
<tr class="separator:af626fc7d32fc9b0dfeec167a52353baf inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f568650dd8e245a274671680ebb7587 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a6f568650dd8e245a274671680ebb7587">reset</a> (self)</td></tr>
<tr class="separator:a6f568650dd8e245a274671680ebb7587 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51174dfa508970e3392246b02d0d94b5 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a51174dfa508970e3392246b02d0d94b5">act</a> (self)</td></tr>
<tr class="separator:a51174dfa508970e3392246b02d0d94b5 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7754a74d6c87590f46e71ec486c285a8 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a7754a74d6c87590f46e71ec486c285a8">batch_act</a> (self, observations)</td></tr>
<tr class="separator:a7754a74d6c87590f46e71ec486c285a8 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8df662b1258ec67752b4fc0ad45733f9 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a8df662b1258ec67752b4fc0ad45733f9">backward</a> (self, loss)</td></tr>
<tr class="separator:a8df662b1258ec67752b4fc0ad45733f9 inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e2c9e180887397daa6229a0f9700b1c inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a7e2c9e180887397daa6229a0f9700b1c">update_params</a> (self)</td></tr>
<tr class="separator:a7e2c9e180887397daa6229a0f9700b1c inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91c163f3e2d39b380095b7083f673b6e inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a91c163f3e2d39b380095b7083f673b6e">zero_grad</a> (self)</td></tr>
<tr class="separator:a91c163f3e2d39b380095b7083f673b6e inherit pub_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classparlai_1_1core_1_1agents_1_1Agent')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classparlai_1_1core_1_1agents_1_1Agent.html">parlai.core.agents.Agent</a></td></tr>
<tr class="memitem:a29e1cdd729ac4236f8bae90b2e66fa04 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1agents_1_1Agent.html#a29e1cdd729ac4236f8bae90b2e66fa04">getID</a> (self)</td></tr>
<tr class="separator:a29e1cdd729ac4236f8bae90b2e66fa04 inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40157e237ea85d75ebc3fd248c7a1a1b inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1agents_1_1Agent.html#a40157e237ea85d75ebc3fd248c7a1a1b">epoch_done</a> (self)</td></tr>
<tr class="separator:a40157e237ea85d75ebc3fd248c7a1a1b inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a801e5ca2a5e8e96a72f0c04549008e8f inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1agents_1_1Agent.html#a801e5ca2a5e8e96a72f0c04549008e8f">shutdown</a> (self)</td></tr>
<tr class="separator:a801e5ca2a5e8e96a72f0c04549008e8f inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a005f62f977e8a7ebf91b9646307153bc inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1agents_1_1Agent.html#a005f62f977e8a7ebf91b9646307153bc">upgrade_opt</a> (cls, opt_from_disk)</td></tr>
<tr class="separator:a005f62f977e8a7ebf91b9646307153bc inherit pub_methods_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a687a40a7925676c15b42a6cee06f5d72"><td class="memItemLeft" align="right" valign="top"><a id="a687a40a7925676c15b42a6cee06f5d72"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>criterion</b></td></tr>
<tr class="separator:a687a40a7925676c15b42a6cee06f5d72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a675eab99eca0761267b0d55910487233"><td class="memItemLeft" align="right" valign="top"><a id="a675eab99eca0761267b0d55910487233"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>model</b></td></tr>
<tr class="separator:a675eab99eca0761267b0d55910487233"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1205be489b10e7870d865844c05d7fec"><td class="memItemLeft" align="right" valign="top"><a id="a1205be489b10e7870d865844c05d7fec"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>rank_top_k</b></td></tr>
<tr class="separator:a1205be489b10e7870d865844c05d7fec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac28b6cc47b43ed9b4f0c6786828d2649"><td class="memItemLeft" align="right" valign="top"><a id="ac28b6cc47b43ed9b4f0c6786828d2649"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>optimizer</b></td></tr>
<tr class="separator:ac28b6cc47b43ed9b4f0c6786828d2649"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af54615af2f53a06df8fb046492f1ec38"><td class="memItemLeft" align="right" valign="top"><a id="af54615af2f53a06df8fb046492f1ec38"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>candidates</b></td></tr>
<tr class="separator:af54615af2f53a06df8fb046492f1ec38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a166529b77c8b77ca4c419534a95379"><td class="memItemLeft" align="right" valign="top"><a id="a9a166529b77c8b77ca4c419534a95379"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>encode_candidate_vecs</b></td></tr>
<tr class="separator:a9a166529b77c8b77ca4c419534a95379"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa94e12e115e0fc09ba34dd9d4839fba"><td class="memItemLeft" align="right" valign="top"><a id="aaa94e12e115e0fc09ba34dd9d4839fba"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>eval_candidates</b></td></tr>
<tr class="separator:aaa94e12e115e0fc09ba34dd9d4839fba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae239c259e74080fe0fe9a501b8e0fc12"><td class="memItemLeft" align="right" valign="top"><a id="ae239c259e74080fe0fe9a501b8e0fc12"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ignore_bad_candidates</b></td></tr>
<tr class="separator:ae239c259e74080fe0fe9a501b8e0fc12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abde0ae40e8dc959f9bad3039b3a267e4"><td class="memItemLeft" align="right" valign="top"><a id="abde0ae40e8dc959f9bad3039b3a267e4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>fixed_candidates_path</b></td></tr>
<tr class="separator:abde0ae40e8dc959f9bad3039b3a267e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a627d68f27f1e2683935674b632c7c3e1"><td class="memItemLeft" align="right" valign="top"><a id="a627d68f27f1e2683935674b632c7c3e1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vocab_candidates</b></td></tr>
<tr class="separator:a627d68f27f1e2683935674b632c7c3e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ea32d15ace58e3cf91712fdc6056bbc"><td class="memItemLeft" align="right" valign="top"><a id="a7ea32d15ace58e3cf91712fdc6056bbc"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vocab_candidate_vecs</b></td></tr>
<tr class="separator:a7ea32d15ace58e3cf91712fdc6056bbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afefae7f9bc31b66c2e488528d4277e58"><td class="memItemLeft" align="right" valign="top"><a id="afefae7f9bc31b66c2e488528d4277e58"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>vocab_candidate_encs</b></td></tr>
<tr class="separator:afefae7f9bc31b66c2e488528d4277e58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ae8c88595193b7a921843c1ad3b25f8"><td class="memItemLeft" align="right" valign="top"><a id="a6ae8c88595193b7a921843c1ad3b25f8"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>fixed_candidates</b></td></tr>
<tr class="separator:a6ae8c88595193b7a921843c1ad3b25f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae74ff1d80d1954b1ec44fe89b46b9f32"><td class="memItemLeft" align="right" valign="top"><a id="ae74ff1d80d1954b1ec44fe89b46b9f32"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>fixed_candidate_vecs</b></td></tr>
<tr class="separator:ae74ff1d80d1954b1ec44fe89b46b9f32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a6bfdf4db906b9f4ed7e75e51d580f9"><td class="memItemLeft" align="right" valign="top"><a id="a7a6bfdf4db906b9f4ed7e75e51d580f9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>fixed_candidate_encs</b></td></tr>
<tr class="separator:a7a6bfdf4db906b9f4ed7e75e51d580f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html">parlai.core.torch_agent.TorchAgent</a></td></tr>
<tr class="memitem:a10b8d2605e619d5d3dc9f67777cb190a inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a10b8d2605e619d5d3dc9f67777cb190a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>use_cuda</b></td></tr>
<tr class="separator:a10b8d2605e619d5d3dc9f67777cb190a inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6f916e01d876679b529a893ad4f52f6 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="aa6f916e01d876679b529a893ad4f52f6"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>fp16</b></td></tr>
<tr class="separator:aa6f916e01d876679b529a893ad4f52f6 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dd17721e788aafd51cd5af7bf7fc967 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a5dd17721e788aafd51cd5af7bf7fc967"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>replies</b></td></tr>
<tr class="separator:a5dd17721e788aafd51cd5af7bf7fc967 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abebf29c0bb956bbc5ccc02777d2af3dd inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="abebf29c0bb956bbc5ccc02777d2af3dd"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>dict</b></td></tr>
<tr class="separator:abebf29c0bb956bbc5ccc02777d2af3dd inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a392ed66573001dfa2846d5042e8fc5a5 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a392ed66573001dfa2846d5042e8fc5a5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>metrics</b></td></tr>
<tr class="separator:a392ed66573001dfa2846d5042e8fc5a5 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a785bb920cf8c8afc3e9bf6a8b77e335a inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a785bb920cf8c8afc3e9bf6a8b77e335a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>opt</b></td></tr>
<tr class="separator:a785bb920cf8c8afc3e9bf6a8b77e335a inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe40410d2e3b2565ecd27441266011fc inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="afe40410d2e3b2565ecd27441266011fc"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>model</b></td></tr>
<tr class="separator:afe40410d2e3b2565ecd27441266011fc inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13d46ae8aed6052679b62c3961a4de62 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a13d46ae8aed6052679b62c3961a4de62"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>criterion</b></td></tr>
<tr class="separator:a13d46ae8aed6052679b62c3961a4de62 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ac66a09c1c164ea08f4b257c61c38a0 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a4ac66a09c1c164ea08f4b257c61c38a0"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>id</b></td></tr>
<tr class="separator:a4ac66a09c1c164ea08f4b257c61c38a0 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a80083f0e34d8abc15b50123efec884 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a3a80083f0e34d8abc15b50123efec884"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>EMPTY</b></td></tr>
<tr class="separator:a3a80083f0e34d8abc15b50123efec884 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95cedd561757c9fc10dbf3a956e7f912 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a95cedd561757c9fc10dbf3a956e7f912"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>NULL_IDX</b></td></tr>
<tr class="separator:a95cedd561757c9fc10dbf3a956e7f912 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2018afae9938937f80b61475314012cd inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a2018afae9938937f80b61475314012cd"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>START_IDX</b></td></tr>
<tr class="separator:a2018afae9938937f80b61475314012cd inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31bb7c8bf380660ee4e3822756563599 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a31bb7c8bf380660ee4e3822756563599"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>END_IDX</b></td></tr>
<tr class="separator:a31bb7c8bf380660ee4e3822756563599 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ca476189900643fab04d1ac0ebfc719 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a1ca476189900643fab04d1ac0ebfc719"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>random</b></td></tr>
<tr class="separator:a1ca476189900643fab04d1ac0ebfc719 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae67e7dc97dff3c46522712945ca23f50 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="ae67e7dc97dff3c46522712945ca23f50"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>batch_idx</b></td></tr>
<tr class="separator:ae67e7dc97dff3c46522712945ca23f50 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15cbb1f743c1d341d914ade47e49071b inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a15cbb1f743c1d341d914ade47e49071b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>histsz</b></td></tr>
<tr class="separator:a15cbb1f743c1d341d914ade47e49071b inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ae27e9fe68d255a960bcb5180f48a65 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a3ae27e9fe68d255a960bcb5180f48a65"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>truncate</b></td></tr>
<tr class="separator:a3ae27e9fe68d255a960bcb5180f48a65 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3a69ecb5f20ce4f8a09c05c5f6f4376 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="ae3a69ecb5f20ce4f8a09c05c5f6f4376"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>text_truncate</b></td></tr>
<tr class="separator:ae3a69ecb5f20ce4f8a09c05c5f6f4376 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbdd7cf2deb2c43d982c57852b83e685 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="adbdd7cf2deb2c43d982c57852b83e685"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>label_truncate</b></td></tr>
<tr class="separator:adbdd7cf2deb2c43d982c57852b83e685 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0484b0246f0a930adc575899cdef033c inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a0484b0246f0a930adc575899cdef033c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>history</b></td></tr>
<tr class="separator:a0484b0246f0a930adc575899cdef033c inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0bd6456c94dfd9afae73b86f05016cf inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="ab0bd6456c94dfd9afae73b86f05016cf"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>is_training</b></td></tr>
<tr class="separator:ab0bd6456c94dfd9afae73b86f05016cf inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6355b9b0c0ccb24ffe1b5e3d89903cc3 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a6355b9b0c0ccb24ffe1b5e3d89903cc3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>rank_candidates</b></td></tr>
<tr class="separator:a6355b9b0c0ccb24ffe1b5e3d89903cc3 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63011fa9bd927de8acc9ffa676caa73a inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a63011fa9bd927de8acc9ffa676caa73a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>add_person_tokens</b></td></tr>
<tr class="separator:a63011fa9bd927de8acc9ffa676caa73a inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9533344de40049bf13209739bc92199d inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a9533344de40049bf13209739bc92199d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>optimizer</b></td></tr>
<tr class="separator:a9533344de40049bf13209739bc92199d inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54d8632c546ab621c93c34f13c964726 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a54d8632c546ab621c93c34f13c964726"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>warmup_scheduler</b></td></tr>
<tr class="separator:a54d8632c546ab621c93c34f13c964726 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0affe6b199275c182a27c9aa07393347 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a0affe6b199275c182a27c9aa07393347"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>scheduler</b></td></tr>
<tr class="separator:a0affe6b199275c182a27c9aa07393347 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a805a9e47552d54d56f5b232ab4d5121f inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a805a9e47552d54d56f5b232ab4d5121f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>proj_rp</b></td></tr>
<tr class="separator:a805a9e47552d54d56f5b232ab4d5121f inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bc525b20568822a042b3bbfa3da3a69 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="a4bc525b20568822a042b3bbfa3da3a69"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>observation</b></td></tr>
<tr class="separator:a4bc525b20568822a042b3bbfa3da3a69 inherit pub_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classparlai_1_1core_1_1agents_1_1Agent')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="classparlai_1_1core_1_1agents_1_1Agent.html">parlai.core.agents.Agent</a></td></tr>
<tr class="memitem:ac00c13f4c7dd1263bf9203fa96dd2366 inherit pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top"><a id="ac00c13f4c7dd1263bf9203fa96dd2366"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>id</b></td></tr>
<tr class="separator:ac00c13f4c7dd1263bf9203fa96dd2366 inherit pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3b45d2754244608c75d4068b90cd051 inherit pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top"><a id="ab3b45d2754244608c75d4068b90cd051"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>opt</b></td></tr>
<tr class="separator:ab3b45d2754244608c75d4068b90cd051 inherit pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedbecc4b4aa7af7413882a0429e0f1db inherit pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td class="memItemLeft" align="right" valign="top"><a id="aedbecc4b4aa7af7413882a0429e0f1db"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>observation</b></td></tr>
<tr class="separator:aedbecc4b4aa7af7413882a0429e0f1db inherit pub_attribs_classparlai_1_1core_1_1agents_1_1Agent"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ae30028148e8c5bd7ef9a9f0a25ca8f22"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#ae30028148e8c5bd7ef9a9f0a25ca8f22">_get_batch_train_metrics</a> (self, scores)</td></tr>
<tr class="separator:ae30028148e8c5bd7ef9a9f0a25ca8f22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af07f02ac90d3d11c572d0c5c0b1ed9de"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#af07f02ac90d3d11c572d0c5c0b1ed9de">_get_train_preds</a> (self, scores, label_inds, cands, cand_vecs)</td></tr>
<tr class="separator:af07f02ac90d3d11c572d0c5c0b1ed9de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d2bb555a535cc34b958829ea92120d5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a0d2bb555a535cc34b958829ea92120d5">_set_label_cands_vec</a> (self, *args, **kwargs)</td></tr>
<tr class="separator:a0d2bb555a535cc34b958829ea92120d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac09793435e7b982a8b658411ca0b4502"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#ac09793435e7b982a8b658411ca0b4502">_build_candidates</a> (self, batch, source, mode)</td></tr>
<tr class="separator:ac09793435e7b982a8b658411ca0b4502"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeceb8a86a165dd9f97b9f8270462a828"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#aeceb8a86a165dd9f97b9f8270462a828">_make_candidate_vecs</a> (self, cands)</td></tr>
<tr class="separator:aeceb8a86a165dd9f97b9f8270462a828"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b802aa31db32a224da530c668a68e84"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a2b802aa31db32a224da530c668a68e84">_save_candidates</a> (self, vecs, path, cand_type='vectors')</td></tr>
<tr class="separator:a2b802aa31db32a224da530c668a68e84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7dd6d6207a4736c34620e0c85c396b0"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#ab7dd6d6207a4736c34620e0c85c396b0">_make_candidate_encs</a> (self, vecs)</td></tr>
<tr class="separator:ab7dd6d6207a4736c34620e0c85c396b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a42cd79a3d59c402422eca36285b2cd05"><td class="memItemLeft" align="right" valign="top"><a id="a42cd79a3d59c402422eca36285b2cd05"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>_find_match</b> (cand_vecs, label_vec)</td></tr>
<tr class="separator:a42cd79a3d59c402422eca36285b2cd05"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html">parlai.core.torch_agent.TorchAgent</a></td></tr>
<tr class="memitem:aea8849fa69a3f5dbd3216c8b06f180ea inherit pub_static_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#aea8849fa69a3f5dbd3216c8b06f180ea">dictionary_class</a> ()</td></tr>
<tr class="separator:aea8849fa69a3f5dbd3216c8b06f180ea inherit pub_static_methods_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent')"><img src="closed.png" alt="-"/>&#160;Static Public Attributes inherited from <a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html">parlai.core.torch_agent.TorchAgent</a></td></tr>
<tr class="memitem:ac946030b54cc854162e8bc6b7aad7272 inherit pub_static_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="ac946030b54cc854162e8bc6b7aad7272"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>P1_TOKEN</b> = '__p1__'</td></tr>
<tr class="separator:ac946030b54cc854162e8bc6b7aad7272 inherit pub_static_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6e16e0532e71b06328e078cb3c9324c inherit pub_static_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memItemLeft" align="right" valign="top"><a id="af6e16e0532e71b06328e078cb3c9324c"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>P2_TOKEN</b> = '__p2__'</td></tr>
<tr class="separator:af6e16e0532e71b06328e078cb3c9324c inherit pub_static_attribs_classparlai_1_1core_1_1torch__agent_1_1TorchAgent"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Abstract TorchRankerAgent class; only meant to be extended.

TorchRankerAgents aim to provide convenient functionality for building ranking
models. This includes:

- Training/evaluating on candidates from a variety of sources.
- Computing hits@1, hits@5, mean reciprical rank (MRR), and other metrics.
- Caching representations for fast runtime when deploying models to production.
</pre> 
<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00025">25</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="acde404a79bf3678bb52d3e6c3ee5244a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acde404a79bf3678bb52d3e6c3ee5244a">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>opt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shared</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Initialize agent.</pre> 
<p>Reimplemented from <a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#ad0a00ada1fcd5b7ceec27b1a6cbdc281">parlai.core.torch_agent.TorchAgent</a>.</p>

<p>Reimplemented in <a class="el" href="classself__feeding_1_1self__feeding__agent_1_1SelfFeedingAgent.html#ac76dc7e656c40b4209513286a5b1b2d9">self_feeding.self_feeding_agent.SelfFeedingAgent</a>, <a class="el" href="classparlai_1_1agents_1_1transformer_1_1transformer_1_1TransformerRankerAgent.html#a677c14e106614404f5c5f8605b90ce3e">parlai.agents.transformer.transformer.TransformerRankerAgent</a>, <a class="el" href="classparlai_1_1agents_1_1transformer_1_1polyencoder_1_1PolyencoderAgent.html#a2e8f1aca19a3ba34386d7c69ed7e17bc">parlai.agents.transformer.polyencoder.PolyencoderAgent</a>, <a class="el" href="classparlai_1_1agents_1_1memnn_1_1memnn_1_1MemnnAgent.html#a256f911504285d19b006def388d0772f">parlai.agents.memnn.memnn.MemnnAgent</a>, <a class="el" href="classparlai_1_1agents_1_1bert__ranker_1_1cross__encoder__ranker_1_1CrossEncoderRankerAgent.html#ab7f5e55dec9f12dc4e4dccc48c682e63">parlai.agents.bert_ranker.cross_encoder_ranker.CrossEncoderRankerAgent</a>, <a class="el" href="classwizard__transformer__ranker_1_1wizard__transformer__ranker_1_1WizardTransformerRankerAgent.html#af70ab88a1dd902b8bd2578e8314f64f8">wizard_transformer_ranker.wizard_transformer_ranker.WizardTransformerRankerAgent</a>, <a class="el" href="classparlai_1_1agents_1_1bert__ranker_1_1bi__encoder__ranker_1_1BiEncoderRankerAgent.html#a353144d4f4c3182774913c4ddba33de9">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent</a>, and <a class="el" href="classparlai_1_1agents_1_1transformer_1_1crossencoder_1_1CrossencoderAgent.html#a22295a739ff290d96c45efd0bfd550bb">parlai.agents.transformer.crossencoder.CrossencoderAgent</a>.</p>

<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00129">129</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">References <a class="el" href="torch__agent_8py_source.html#l00762">parlai.core.torch_agent.TorchAgent._get_init_model()</a>, <a class="el" href="torch__agent_8py_source.html#l01859">parlai.core.torch_agent.TorchAgent._total_parameters()</a>, <a class="el" href="torch__agent_8py_source.html#l01868">parlai.core.torch_agent.TorchAgent._trainable_parameters()</a>, <a class="el" href="dummy__torch__agent_8py_source.html#l00086">parlai.agents.test_agents.dummy_torch_agent.MockTorchAgent.build_criterion()</a>, <a class="el" href="torch__classifier__agent_8py_source.html#l00160">parlai.core.torch_classifier_agent.TorchClassifierAgent.build_criterion()</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00190">parlai.core.torch_ranker_agent.TorchRankerAgent.build_criterion()</a>, <a class="el" href="agents_2seq2seq_2seq2seq_8py_source.html#l00199">parlai.agents.seq2seq.seq2seq.Seq2seqAgent.build_criterion()</a>, <a class="el" href="transformer_8py_source.html#l00204">parlai.agents.transformer.transformer.TransformerRankerAgent.build_criterion()</a>, <a class="el" href="torch__generator__agent_8py_source.html#l00376">parlai.core.torch_generator_agent.TorchGeneratorAgent.build_criterion()</a>, <a class="el" href="fairseq_8py_source.html#l00428">parlai.agents.fairseq.fairseq.FairseqAgent.build_criterion()</a>, <a class="el" href="torch__agent_8py_source.html#l00890">parlai.core.torch_agent.TorchAgent.build_lr_scheduler()</a>, <a class="el" href="transformer__classifier_8py_source.html#l00035">parlai.agents.transformer_classifier.transformer_classifier.TransformerClassifierAgent.build_model()</a>, <a class="el" href="crossencoder_8py_source.html#l00037">parlai.agents.transformer.crossencoder.CrossencoderAgent.build_model()</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00059">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.build_model()</a>, <a class="el" href="cross__encoder__ranker_8py_source.html#l00082">parlai.agents.bert_ranker.cross_encoder_ranker.CrossEncoderRankerAgent.build_model()</a>, <a class="el" href="dummy__torch__agent_8py_source.html#l00083">parlai.agents.test_agents.dummy_torch_agent.MockTorchAgent.build_model()</a>, <a class="el" href="memnn_8py_source.html#l00097">parlai.agents.memnn.memnn.MemnnAgent.build_model()</a>, <a class="el" href="polyencoder_8py_source.html#l00101">parlai.agents.transformer.polyencoder.PolyencoderAgent.build_model()</a>, <a class="el" href="bert__classifier_8py_source.html#l00129">parlai.agents.bert_classifier.bert_classifier.BertClassifierAgent.build_model()</a>, <a class="el" href="agents_2seq2seq_2seq2seq_8py_source.html#l00156">parlai.agents.seq2seq.seq2seq.Seq2seqAgent.build_model()</a>, <a class="el" href="transformer_8py_source.html#l00197">parlai.agents.transformer.transformer.TransformerRankerAgent.build_model()</a>, <a class="el" href="transformer_8py_source.html#l00284">parlai.agents.transformer.transformer.TransformerGeneratorAgent.build_model()</a>, <a class="el" href="fairseq_8py_source.html#l00414">parlai.agents.fairseq.fairseq.FairseqAgent.build_model()</a>, <a class="el" href="torch__agent_8py_source.html#l00801">parlai.core.torch_agent.TorchAgent.build_model()</a>, <a class="el" href="dummy__torch__agent_8py_source.html#l00080">parlai.agents.test_agents.dummy_torch_agent.MockTorchAgent.criterion</a>, <a class="el" href="example__seq2seq_8py_source.html#l00161">parlai.agents.example_seq2seq.example_seq2seq.ExampleSeq2seqAgent.criterion</a>, <a class="el" href="starspace_8py_source.html#l00214">parlai.agents.starspace.starspace.StarspaceAgent.criterion</a>, <a class="el" href="language__model_8py_source.html#l00248">parlai.agents.language_model.language_model.LanguageModelAgent.criterion</a>, <a class="el" href="seq2seq__v1_8py_source.html#l00257">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.criterion</a>, <a class="el" href="fairseq_8py_source.html#l00353">parlai.agents.fairseq.fairseq.FairseqAgent.criterion</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00496">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.criterion</a>, <a class="el" href="torch__agent_8py_source.html#l00690">parlai.core.torch_agent.TorchAgent.criterion</a>, <a class="el" href="torch__agent_8py_source.html#l00661">parlai.core.torch_agent.TorchAgent.fp16</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00066">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.init_optim()</a>, <a class="el" href="cross__encoder__ranker_8py_source.html#l00091">parlai.agents.bert_ranker.cross_encoder_ranker.CrossEncoderRankerAgent.init_optim()</a>, <a class="el" href="bert__classifier_8py_source.html#l00134">parlai.agents.bert_classifier.bert_classifier.BertClassifierAgent.init_optim()</a>, <a class="el" href="torch__agent__v1_8py_source.html#l00334">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent.init_optim()</a>, <a class="el" href="torch__agent_8py_source.html#l00805">parlai.core.torch_agent.TorchAgent.init_optim()</a>, <a class="el" href="unigram_8py_source.html#l00112">parlai.agents.unigram.unigram.UnigramAgent.load()</a>, <a class="el" href="both__encoder__ranker_8py_source.html#l00124">parlai.agents.bert_ranker.both_encoder_ranker.BothEncoderRankerAgent.load()</a>, <a class="el" href="image__featurizers_8py_source.html#l00194">parlai.core.image_featurizers.ImageLoader.load()</a>, <a class="el" href="agents_2seq2seq_2seq2seq_8py_source.html#l00221">parlai.agents.seq2seq.seq2seq.Seq2seqAgent.load()</a>, <a class="el" href="ir__baseline_8py_source.html#l00311">parlai.agents.ir_baseline.ir_baseline.IrBaselineAgent.load()</a>, <a class="el" href="memnn__v0_8py_source.html#l00453">parlai.agents.legacy_agents.memnn.memnn_v0.MemnnAgent.load()</a>, <a class="el" href="fairseq_8py_source.html#l00458">parlai.agents.fairseq.fairseq.FairseqAgent.load()</a>, <a class="el" href="dict__v0_8py_source.html#l00505">parlai.agents.legacy_agents.seq2seq.dict_v0.DictionaryAgent.load()</a>, <a class="el" href="dict__v1_8py_source.html#l00515">parlai.agents.legacy_agents.seq2seq.dict_v1.DictionaryAgent.load()</a>, <a class="el" href="starspace_8py_source.html#l00575">parlai.agents.starspace.starspace.StarspaceAgent.load()</a>, <a class="el" href="dict_8py_source.html#l00588">parlai.core.dict.DictionaryAgent.load()</a>, <a class="el" href="language__model_8py_source.html#l00705">parlai.agents.language_model.language_model.LanguageModelAgent.load()</a>, <a class="el" href="seq2seq__v1_8py_source.html#l00790">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.load()</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00917">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.load()</a>, <a class="el" href="torch__agent__v1_8py_source.html#l00965">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent.load()</a>, <a class="el" href="torch__agent_8py_source.html#l01689">parlai.core.torch_agent.TorchAgent.load()</a>, <a class="el" href="language__model_8py_source.html#l00159">parlai.agents.language_model.language_model.LanguageModelAgent.metrics</a>, <a class="el" href="parlai_2core_2agents_8py_source.html#l00192">parlai.core.agents.Teacher.metrics</a>, <a class="el" href="fairseq_8py_source.html#l00222">parlai.agents.fairseq.fairseq.FairseqAgent.metrics</a>, <a class="el" href="seq2seq__v1_8py_source.html#l00231">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.metrics</a>, <a class="el" href="metrics_8py_source.html#l00237">parlai.core.metrics.Metrics.metrics</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00351">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.metrics</a>, <a class="el" href="torch__agent_8py_source.html#l00678">parlai.core.torch_agent.TorchAgent.metrics</a>, <a class="el" href="crossencoder_8py_source.html#l00028">parlai.agents.transformer.crossencoder.CrossencoderAgent.model</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00050">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.model</a>, <a class="el" href="cross__encoder__ranker_8py_source.html#l00074">parlai.agents.bert_ranker.cross_encoder_ranker.CrossEncoderRankerAgent.model</a>, <a class="el" href="dummy__torch__agent_8py_source.html#l00079">parlai.agents.test_agents.dummy_torch_agent.MockTorchAgent.model</a>, <a class="el" href="polyencoder_8py_source.html#l00099">parlai.agents.transformer.polyencoder.PolyencoderAgent.model</a>, <a class="el" href="memnn__v0_8py_source.html#l00104">parlai.agents.legacy_agents.memnn.memnn_v0.MemnnAgent.model</a>, <a class="el" href="drqa_8py_source.html#l00123">parlai.agents.drqa.drqa.DrqaAgent.model</a>, <a class="el" href="language__model_8py_source.html#l00173">parlai.agents.language_model.language_model.LanguageModelAgent.model</a>, <a class="el" href="transformer_8py_source.html#l00185">parlai.agents.transformer.transformer.TransformerRankerAgent.model</a>, <a class="el" href="starspace_8py_source.html#l00193">parlai.agents.starspace.starspace.StarspaceAgent.model</a>, <a class="el" href="seq2seq__v1_8py_source.html#l00230">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.model</a>, <a class="el" href="fairseq_8py_source.html#l00354">parlai.agents.fairseq.fairseq.FairseqAgent.model</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00381">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.model</a>, <a class="el" href="torch__agent_8py_source.html#l00689">parlai.core.torch_agent.TorchAgent.model</a>, <a class="el" href="memnn_2modules__v0_8py_source.html#l00017">parlai.agents.legacy_agents.memnn.modules_v0.MemNN.opt</a>, <a class="el" href="parlai_2agents_2language__model_2modules_8py_source.html#l00018">parlai.agents.language_model.modules.RNNModel.opt</a>, <a class="el" href="rnn__reader_8py_source.html#l00019">parlai.agents.drqa.rnn_reader.RnnDocReader.opt</a>, <a class="el" href="model_8py_source.html#l00024">parlai.agents.drqa.model.DocReaderModel.opt</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00033">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Agent.opt</a>, <a class="el" href="parlai_2agents_2starspace_2modules_8py_source.html#l00036">parlai.agents.starspace.modules.Starspace.opt</a>, <a class="el" href="seq2seq_2modules__v0_8py_source.html#l00040">parlai.agents.legacy_agents.seq2seq.modules_v0.Seq2seq.opt</a>, <a class="el" href="unigram_8py_source.html#l00052">parlai.agents.unigram.unigram.UnigramAgent.opt</a>, <a class="el" href="remote__agent_8py_source.html#l00060">parlai.agents.remote_agent.remote_agent.RemoteAgentAgent.opt</a>, <a class="el" href="parlai_2core_2agents_8py_source.html#l00060">parlai.core.agents.Agent.opt</a>, <a class="el" href="memnn__v0_8py_source.html#l00135">parlai.agents.legacy_agents.memnn.memnn_v0.MemnnAgent.opt</a>, <a class="el" href="parlai_2agents_2transformer_2modules_8py_source.html#l00137">parlai.agents.transformer.modules.TransformerMemNetModel.opt</a>, <a class="el" href="language__model_8py_source.html#l00169">parlai.agents.language_model.language_model.LanguageModelAgent.opt</a>, <a class="el" href="dict__v0_8py_source.html#l00196">parlai.agents.legacy_agents.seq2seq.dict_v0.DictionaryAgent.opt</a>, <a class="el" href="dict__v1_8py_source.html#l00206">parlai.agents.legacy_agents.seq2seq.dict_v1.DictionaryAgent.opt</a>, <a class="el" href="ir__baseline_8py_source.html#l00246">parlai.agents.ir_baseline.ir_baseline.IrBaselineAgent.opt</a>, <a class="el" href="torch__agent__v1_8py_source.html#l00295">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent.opt</a>, <a class="el" href="fairseq_8py_source.html#l00338">parlai.agents.fairseq.fairseq.FairseqAgent.opt</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00373">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.opt</a>, <a class="el" href="starspace_8py_source.html#l00582">parlai.agents.starspace.starspace.StarspaceAgent.opt</a>, <a class="el" href="model_8py_source.html#l00042">parlai.agents.drqa.model.DocReaderModel.optimizer</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00067">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.optimizer</a>, <a class="el" href="cross__encoder__ranker_8py_source.html#l00092">parlai.agents.bert_ranker.cross_encoder_ranker.CrossEncoderRankerAgent.optimizer</a>, <a class="el" href="bert__classifier_8py_source.html#l00136">parlai.agents.bert_classifier.bert_classifier.BertClassifierAgent.optimizer</a>, <a class="el" href="starspace_8py_source.html#l00261">parlai.agents.starspace.starspace.StarspaceAgent.optimizer</a>, <a class="el" href="language__model_8py_source.html#l00262">parlai.agents.language_model.language_model.LanguageModelAgent.optimizer</a>, <a class="el" href="torch__agent__v1_8py_source.html#l00361">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent.optimizer</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00528">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.optimizer</a>, <a class="el" href="torch__agent_8py_source.html#l00850">parlai.core.torch_agent.TorchAgent.optimizer</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00168">parlai.core.torch_ranker_agent.TorchRankerAgent.rank_top_k</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00785">parlai.core.torch_ranker_agent.TorchRankerAgent.set_fixed_candidates()</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00074">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.set_vocab_candidates()</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00740">parlai.core.torch_ranker_agent.TorchRankerAgent.set_vocab_candidates()</a>, <a class="el" href="image__featurizers_8py_source.html#l00024">parlai.core.image_featurizers.ImageLoader.use_cuda</a>, <a class="el" href="memnn_2modules__v0_8py_source.html#l00048">parlai.agents.legacy_agents.memnn.modules_v0.MemNN.use_cuda</a>, <a class="el" href="memnn__v0_8py_source.html#l00096">parlai.agents.legacy_agents.memnn.memnn_v0.MemnnAgent.use_cuda</a>, <a class="el" href="language__model_8py_source.html#l00162">parlai.agents.language_model.language_model.LanguageModelAgent.use_cuda</a>, <a class="el" href="torch__agent__v1_8py_source.html#l00303">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent.use_cuda</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00367">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.use_cuda</a>, and <a class="el" href="torch__agent_8py_source.html#l00654">parlai.core.torch_agent.TorchAgent.use_cuda</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_acde404a79bf3678bb52d3e6c3ee5244a_cgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_acde404a79bf3678bb52d3e6c3ee5244a_cgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_acde404a79bf3678bb52d3e6c3ee5244a_cgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_acde404a79bf3678bb52d3e6c3ee5244a_cgraph">
<area shape="rect" title=" " alt="" coords="5,1735,184,1791"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a81020ea27044882e6a790aabb8e3e6a0" title=" " alt="" coords="291,5,475,47"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a07510066c7373fbe2f1a5b8367aa91a8" title=" " alt="" coords="284,71,481,112"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a1eb6fbd0142040cfb7b817f002ea238a" title=" " alt="" coords="303,137,462,193"/>
<area shape="rect" href="classparlai_1_1agents_1_1test__agents_1_1dummy__torch__agent_1_1MockTorchAgent.html#a457b269132e6c4ec92308ce87aa85336" title=" " alt="" coords="285,217,480,288"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__classifier__agent_1_1TorchClassifierAgent.html#adeab756c0b58667aaf417575c23d1dfb" title=" " alt="" coords="273,313,492,369"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a16d004a75c5fee42cd13db4abe157b98" title=" " alt="" coords="280,393,485,449"/>
<area shape="rect" href="classparlai_1_1agents_1_1seq2seq_1_1seq2seq_1_1Seq2seqAgent.html#aad570608fb05da482411201aa2e0b47f" title=" " alt="" coords="279,473,486,515"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1transformer_1_1TransformerRankerAgent.html#af91ef63ee5c7f7588a75e32587364c80" title=" " alt="" coords="263,539,503,595"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__generator__agent_1_1TorchGeneratorAgent.html#a8f8437dd8d0dc44f941dbc6182121284" title=" " alt="" coords="273,619,493,675"/>
<area shape="rect" href="classparlai_1_1agents_1_1fairseq_1_1fairseq_1_1FairseqAgent.html#a1ec171aaa11cc89157238d60da9661a0" title=" " alt="" coords="289,700,476,741"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#aa51ac42dc34e3d2281a01cba78a96151" title=" " alt="" coords="284,765,481,807"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer__classifier_1_1transformer__classifier_1_1TransformerClassifierAgent.html#a10a0e65863e4e7b6a0ac30d3ff6f3c5f" title=" " alt="" coords="277,831,488,901"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1crossencoder_1_1CrossencoderAgent.html#af63326f1f4d295e7a1a7fad4b07e077d" title=" " alt="" coords="257,925,509,967"/>
<area shape="rect" href="classparlai_1_1agents_1_1bert__ranker_1_1bi__encoder__ranker_1_1BiEncoderRankerAgent.html#a120946c26655cbb680f1e492cf4e4817" title=" " alt="" coords="267,991,498,1047"/>
<area shape="rect" href="classparlai_1_1agents_1_1bert__ranker_1_1cross__encoder__ranker_1_1CrossEncoderRankerAgent.html#a0754f7cf281a0223667ffb82c846a843" title=" " alt="" coords="232,1071,533,1127"/>
<area shape="rect" href="classparlai_1_1agents_1_1test__agents_1_1dummy__torch__agent_1_1MockTorchAgent.html#a8d6b885ba3adcee439eab49922e584a4" title=" " alt="" coords="264,1151,501,1207"/>
<area shape="rect" href="classparlai_1_1agents_1_1memnn_1_1memnn_1_1MemnnAgent.html#aa5b5782548443a008c0502ec9ddedee2" title=" " alt="" coords="285,1232,480,1273"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1polyencoder_1_1PolyencoderAgent.html#a50c59f1b745560d8883c1f9b65dce10a" title=" " alt="" coords="261,1297,505,1339"/>
<area shape="rect" href="classparlai_1_1agents_1_1bert__classifier_1_1bert__classifier_1_1BertClassifierAgent.html#a9bd6daeddde03212d67e452ef93118c4" title=" " alt="" coords="279,1363,487,1419"/>
<area shape="rect" href="classparlai_1_1agents_1_1seq2seq_1_1seq2seq_1_1Seq2seqAgent.html#a43422bdf284bfc06a9bd2db434a7167c" title=" " alt="" coords="279,1444,486,1485"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1transformer_1_1TransformerRankerAgent.html#a3336fdab2d667e6e631135ec70e8558f" title=" " alt="" coords="262,1509,503,1551"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1transformer_1_1TransformerGeneratorAgent.html#a473f2a19d6bce412c4c9163c7beb9b09" title=" " alt="" coords="255,1575,511,1616"/>
<area shape="rect" href="classparlai_1_1agents_1_1fairseq_1_1fairseq_1_1FairseqAgent.html#a275a60cb93929725725d103fc76905ba" title=" " alt="" coords="289,1640,476,1681"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a9a21fa33fa5b2b928024fbc67826f233" title=" " alt="" coords="301,1705,464,1747"/>
<area shape="rect" href="classparlai_1_1agents_1_1bert__ranker_1_1bi__encoder__ranker_1_1BiEncoderRankerAgent.html#a14ad454025e3db96b5f34e1270e44254" title=" " alt="" coords="273,1771,492,1827"/>
<area shape="rect" href="classparlai_1_1agents_1_1bert__ranker_1_1cross__encoder__ranker_1_1CrossEncoderRankerAgent.html#aedbc5976f08f86c9587c0b7486879846" title=" " alt="" coords="239,1851,527,1907"/>
<area shape="rect" href="classparlai_1_1agents_1_1bert__classifier_1_1bert__classifier_1_1BertClassifierAgent.html#aaf78ab1d312861ef4ba73bc7813e68aa" title=" " alt="" coords="285,1931,480,1987"/>
<area shape="rect" href="classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a1727b17db185dcc7237d893018c7b76c" title=" " alt="" coords="276,2011,489,2067"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a3784f1ddaa6ffad009716910f3f36dd4" title=" " alt="" coords="303,2092,462,2133"/>
<area shape="rect" href="classparlai_1_1agents_1_1unigram_1_1unigram_1_1UnigramAgent.html#a01fa26682df757201166d6f18be60da8" title=" " alt="" coords="283,2157,483,2199"/>
<area shape="rect" href="classparlai_1_1agents_1_1bert__ranker_1_1both__encoder__ranker_1_1BothEncoderRankerAgent.html#a3900966ef98a770cf6e871bb7de67907" title=" " alt="" coords="259,2223,507,2279"/>
<area shape="rect" href="classparlai_1_1core_1_1image__featurizers_1_1ImageLoader.html#a40f68d29ad49a323cf50e08c6385e39e" title=" " alt="" coords="286,2304,479,2345"/>
<area shape="rect" href="classparlai_1_1agents_1_1seq2seq_1_1seq2seq_1_1Seq2seqAgent.html#a6f94b2896a2a76476f8646ec7d9360ed" title=" " alt="" coords="279,2369,486,2411"/>
<area shape="rect" href="classparlai_1_1agents_1_1ir__baseline_1_1ir__baseline_1_1IrBaselineAgent.html#a3701001e1de9bcc2d110a318799101c1" title=" " alt="" coords="282,2435,483,2476"/>
<area shape="rect" href="classparlai_1_1agents_1_1legacy__agents_1_1memnn_1_1memnn__v0_1_1MemnnAgent.html#a43e08459f9552c66ef389b8727b8eff3" title=" " alt="" coords="267,2501,498,2557"/>
<area shape="rect" href="classparlai_1_1agents_1_1fairseq_1_1fairseq_1_1FairseqAgent.html#a20245b04f2a8229809368fb7c43f81e3" title=" " alt="" coords="289,2581,476,2623"/>
<area shape="rect" href="classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1dict__v0_1_1DictionaryAgent.html#a4a13c4937c3cd5bb14d5f28658ece153" title=" " alt="" coords="299,2647,467,2703"/>
<area shape="rect" href="classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1dict__v1_1_1DictionaryAgent.html#aee99d2e98af6ca938e44daa87d3bee9c" title=" " alt="" coords="299,2727,467,2783"/>
<area shape="rect" href="classparlai_1_1agents_1_1starspace_1_1starspace_1_1StarspaceAgent.html#a57f2fcd5e04246f3d8edf57ccdb99eab" title=" " alt="" coords="271,2808,494,2849"/>
<area shape="rect" href="classparlai_1_1core_1_1dict_1_1DictionaryAgent.html#aa4229d1ba17932f588e15067afd9bf42" title=" " alt="" coords="297,2873,468,2915"/>
<area shape="rect" href="classparlai_1_1agents_1_1language__model_1_1language__model_1_1LanguageModelAgent.html#a3b1a39e1467680e19dccfcfb8dae4273" title=" " alt="" coords="271,2939,494,2995"/>
<area shape="rect" href="classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#a3ee5ae38c0e37bcc1e4eb44bae8a3cce" title=" " alt="" coords="295,3019,470,3075"/>
<area shape="rect" href="classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent.html#a2aabe1e56b7b94f46875ae7f704f681f" title=" " alt="" coords="295,3099,470,3155"/>
<area shape="rect" href="classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a6d71ad7997e048e4f4f7d957fae64ac5" title=" " alt="" coords="292,3179,473,3235"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#af626fc7d32fc9b0dfeec167a52353baf" title=" " alt="" coords="303,3260,462,3301"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a9039757596f98b45b6676b16589883a3" title=" " alt="" coords="285,3326,481,3382"/>
<area shape="rect" href="classparlai_1_1agents_1_1bert__ranker_1_1bi__encoder__ranker_1_1BiEncoderRankerAgent.html#acdfa23a21c8364e7205093a5af51264f" title=" " alt="" coords="293,3407,473,3477"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a41c604613a97e566bfcc31667d0dfc6a" title=" " alt="" coords="285,3502,481,3558"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a5dcfca62a677f8de97f09ce993258f84" title=" " alt="" coords="581,2231,763,2272"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ac09793435e7b982a8b658411ca0b4502"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac09793435e7b982a8b658411ca0b4502">&#9670;&nbsp;</a></span>_build_candidates()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent._build_candidates </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Build a candidate set for this batch.

:param batch:
    a Batch object (defined in torch_agent.py)
:param source:
    the source from which candidates should be built, one of
    ['batch', 'batch-all-cands', 'inline', 'fixed']
:param mode:
    'train' or 'eval'

:return: tuple of tensors (label_inds, cands, cand_vecs)

    label_inds: A [bsz] LongTensor of the indices of the labels for each
example from its respective candidate set
    cands: A [num_cands] list of (text) candidates
OR a [batchsize] list of such lists if source=='inline'
    cand_vecs: A padded [num_cands, seqlen] LongTensor of vectorized candidates
OR a [batchsize, num_cands, seqlen] LongTensor if source=='inline'

Possible sources of candidates:

    * batch: the set of all labels in this batch
Use all labels in the batch as the candidate set (with all but the
example's label being treated as negatives).
Note: with this setting, the candidate set is identical for all
examples in a batch. This option may be undesirable if it is possible
for duplicate labels to occur in a batch, since the second instance of
the correct label will be treated as a negative.
    * batch-all-cands: the set of all candidates in this batch
Use all candidates in the batch as candidate set.
Note 1: This can result in a very large number of candidates.
Note 2: In this case we will deduplicate candidates.
Note 3: just like with 'batch' the candidate set is identical
for all examples in a batch.
    * inline: batch_size lists, one list per example
If each example comes with a list of possible candidates, use those.
Note: With this setting, each example will have its own candidate set.
    * fixed: one global candidate list, provided in a file from the user
If self.fixed_candidates is not None, use a set of fixed candidates for
all examples.
Note: this setting is not recommended for training unless the
universe of possible candidates is very small.
    * vocab: one global candidate list, extracted from the vocabulary with the
exception of self.NULL_IDX.
</pre> 
<p>Reimplemented in <a class="el" href="classself__feeding_1_1self__feeding__agent_1_1SelfFeedingAgent.html#a04f0261c442d03a55cb0f21c922d0989">self_feeding.self_feeding_agent.SelfFeedingAgent</a>.</p>

<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00483">483</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">References <a class="el" href="torch__ranker__agent_8py_source.html#l00691">parlai.core.torch_ranker_agent.TorchRankerAgent._find_match()</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00803">parlai.core.torch_ranker_agent.TorchRankerAgent.fixed_candidate_vecs</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00802">parlai.core.torch_ranker_agent.TorchRankerAgent.fixed_candidates</a>, <a class="el" href="torch__agent_8py_source.html#l00661">parlai.core.torch_agent.TorchAgent.fp16</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00204">parlai.core.torch_ranker_agent.TorchRankerAgent.ignore_bad_candidates</a>, <a class="el" href="language__model_8py_source.html#l00244">parlai.agents.language_model.language_model.LanguageModelAgent.is_training</a>, <a class="el" href="fairseq_8py_source.html#l00523">parlai.agents.fairseq.fairseq.FairseqAgent.is_training</a>, <a class="el" href="torch__agent_8py_source.html#l00732">parlai.core.torch_agent.TorchAgent.is_training</a>, <a class="el" href="dummy__torch__agent_8py_source.html#l00020">parlai.agents.test_agents.dummy_torch_agent.MockDict.NULL_IDX</a>, <a class="el" href="seq2seq_2modules__v0_8py_source.html#l00045">parlai.agents.legacy_agents.seq2seq.modules_v0.Seq2seq.NULL_IDX</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00053">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.NULL_IDX</a>, <a class="el" href="both__encoder__ranker_8py_source.html#l00062">parlai.agents.bert_ranker.both_encoder_ranker.BothEncoderRankerAgent.NULL_IDX</a>, <a class="el" href="modules__v1_8py_source.html#l00078">parlai.agents.legacy_agents.seq2seq.modules_v1.Seq2seq.NULL_IDX</a>, <a class="el" href="cross__encoder__ranker_8py_source.html#l00078">parlai.agents.bert_ranker.cross_encoder_ranker.CrossEncoderRankerAgent.NULL_IDX</a>, <a class="el" href="memnn__v0_8py_source.html#l00140">parlai.agents.legacy_agents.memnn.memnn_v0.MemnnAgent.NULL_IDX</a>, <a class="el" href="language__model_8py_source.html#l00177">parlai.agents.language_model.language_model.LanguageModelAgent.NULL_IDX</a>, <a class="el" href="starspace_8py_source.html#l00182">parlai.agents.starspace.starspace.StarspaceAgent.NULL_IDX</a>, <a class="el" href="torch__agent__v1_8py_source.html#l00318">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent.NULL_IDX</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00378">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.NULL_IDX</a>, <a class="el" href="seq2seq_2modules__v0_8py_source.html#l00556">parlai.agents.legacy_agents.seq2seq.modules_v0.Ranker.NULL_IDX</a>, <a class="el" href="torch__agent_8py_source.html#l00709">parlai.core.torch_agent.TorchAgent.NULL_IDX</a>, <a class="el" href="image__featurizers_8py_source.html#l00024">parlai.core.image_featurizers.ImageLoader.use_cuda</a>, <a class="el" href="memnn_2modules__v0_8py_source.html#l00048">parlai.agents.legacy_agents.memnn.modules_v0.MemNN.use_cuda</a>, <a class="el" href="memnn__v0_8py_source.html#l00096">parlai.agents.legacy_agents.memnn.memnn_v0.MemnnAgent.use_cuda</a>, <a class="el" href="language__model_8py_source.html#l00162">parlai.agents.language_model.language_model.LanguageModelAgent.use_cuda</a>, <a class="el" href="torch__agent__v1_8py_source.html#l00303">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent.use_cuda</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00367">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.use_cuda</a>, <a class="el" href="torch__agent_8py_source.html#l00654">parlai.core.torch_agent.TorchAgent.use_cuda</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00083">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.vocab_candidate_vecs</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00749">parlai.core.torch_ranker_agent.TorchRankerAgent.vocab_candidate_vecs</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00082">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.vocab_candidates</a>, and <a class="el" href="torch__ranker__agent_8py_source.html#l00748">parlai.core.torch_ranker_agent.TorchRankerAgent.vocab_candidates</a>.</p>

<p class="reference">Referenced by <a class="el" href="torch__ranker__agent_8py_source.html#l00383">parlai.core.torch_ranker_agent.TorchRankerAgent.eval_step()</a>, <a class="el" href="self__feeding__agent_8py_source.html#l00438">self_feeding.self_feeding_agent.SelfFeedingAgent.eval_step()</a>, and <a class="el" href="torch__ranker__agent_8py_source.html#l00335">parlai.core.torch_ranker_agent.TorchRankerAgent.train_step()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_ac09793435e7b982a8b658411ca0b4502_cgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_ac09793435e7b982a8b658411ca0b4502_cgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_ac09793435e7b982a8b658411ca0b4502_cgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_ac09793435e7b982a8b658411ca0b4502_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,184,61"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a42cd79a3d59c402422eca36285b2cd05" title=" " alt="" coords="232,5,411,61"/>
</map>
</div>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_ac09793435e7b982a8b658411ca0b4502_icgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_ac09793435e7b982a8b658411ca0b4502_icgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_ac09793435e7b982a8b658411ca0b4502_icgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_ac09793435e7b982a8b658411ca0b4502_icgraph">
<area shape="rect" title=" " alt="" coords="945,97,1124,153"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a65bca7841123e4c3df1e09f8c4eb397f" title=" " alt="" coords="663,104,897,145"/>
<area shape="rect" href="classself__feeding_1_1self__feeding__agent_1_1SelfFeedingAgent.html#a9f6ed50b9db65bede09f19810e05abc4" title=" " alt="" coords="666,169,894,211"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a05ddf921f386f21116ec0ef50796987a" title=" " alt="" coords="663,39,897,80"/>
<area shape="rect" href="classtransresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent.html#a057eb1109f5c2ea467539083e2f7e7f6" title=" " alt="" coords="292,104,615,145"/>
<area shape="rect" href="classtransresnet_1_1transresnet_1_1TransresnetAgent.html#a5eadf6ccc4b1d15a520a70d111bff493" title=" " alt="" coords="360,39,547,80"/>
<area shape="rect" href="classtransresnet_1_1transresnet_1_1TransresnetAgent.html#ad59fea461b2ea1f9731742901203bdd7" title=" " alt="" coords="45,5,205,47"/>
<area shape="rect" href="classmastering__the__dungeon_1_1agents_1_1graph__world2_1_1agents_1_1ModelAgentBase.html#a768f25fa424b2cd4d1de8e62bfed970a" title=" " alt="" coords="5,71,244,112"/>
<area shape="rect" href="classagent_1_1memnn__feedback_1_1MemnnFeedbackAgent.html#ab221141e0a956be465e718bb349e7554" title=" " alt="" coords="21,136,229,177"/>
<area shape="rect" href="classkvmemnn_1_1KvmemnnAgent.html#a6f57723b871277392a3f3fd627c717d8" title=" " alt="" coords="25,202,224,229"/>
</map>
</div>

</div>
</div>
<a id="ae30028148e8c5bd7ef9a9f0a25ca8f22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae30028148e8c5bd7ef9a9f0a25ca8f22">&#9670;&nbsp;</a></span>_get_batch_train_metrics()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent._get_batch_train_metrics </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scores</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Get fast metrics calculations if we train with batch candidates.

Specifically, calculate accuracy ('train_accuracy'), average rank,
and mean reciprocal rank.
</pre> 
<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00250">250</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="torch__ranker__agent_8py_source.html#l00335">parlai.core.torch_ranker_agent.TorchRankerAgent.train_step()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_ae30028148e8c5bd7ef9a9f0a25ca8f22_icgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_ae30028148e8c5bd7ef9a9f0a25ca8f22_icgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_ae30028148e8c5bd7ef9a9f0a25ca8f22_icgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_ae30028148e8c5bd7ef9a9f0a25ca8f22_icgraph">
<area shape="rect" title=" " alt="" coords="945,65,1124,121"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a05ddf921f386f21116ec0ef50796987a" title=" " alt="" coords="663,72,897,113"/>
<area shape="rect" href="classtransresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent.html#a057eb1109f5c2ea467539083e2f7e7f6" title=" " alt="" coords="292,104,615,145"/>
<area shape="rect" href="classtransresnet_1_1transresnet_1_1TransresnetAgent.html#a5eadf6ccc4b1d15a520a70d111bff493" title=" " alt="" coords="360,39,547,80"/>
<area shape="rect" href="classtransresnet_1_1transresnet_1_1TransresnetAgent.html#ad59fea461b2ea1f9731742901203bdd7" title=" " alt="" coords="45,5,205,47"/>
<area shape="rect" href="classmastering__the__dungeon_1_1agents_1_1graph__world2_1_1agents_1_1ModelAgentBase.html#a768f25fa424b2cd4d1de8e62bfed970a" title=" " alt="" coords="5,71,244,112"/>
<area shape="rect" href="classagent_1_1memnn__feedback_1_1MemnnFeedbackAgent.html#ab221141e0a956be465e718bb349e7554" title=" " alt="" coords="21,136,229,177"/>
<area shape="rect" href="classkvmemnn_1_1KvmemnnAgent.html#a6f57723b871277392a3f3fd627c717d8" title=" " alt="" coords="25,202,224,229"/>
</map>
</div>

</div>
</div>
<a id="af07f02ac90d3d11c572d0c5c0b1ed9de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af07f02ac90d3d11c572d0c5c0b1ed9de">&#9670;&nbsp;</a></span>_get_train_preds()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent._get_train_preds </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scores</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>label_inds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cands</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cand_vecs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Return predictions from training.</pre> 
<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00270">270</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">References <a class="el" href="language__model_8py_source.html#l00159">parlai.agents.language_model.language_model.LanguageModelAgent.metrics</a>, <a class="el" href="parlai_2core_2agents_8py_source.html#l00192">parlai.core.agents.Teacher.metrics</a>, <a class="el" href="fairseq_8py_source.html#l00222">parlai.agents.fairseq.fairseq.FairseqAgent.metrics</a>, <a class="el" href="seq2seq__v1_8py_source.html#l00231">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.metrics</a>, <a class="el" href="metrics_8py_source.html#l00237">parlai.core.metrics.Metrics.metrics</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00351">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.metrics</a>, <a class="el" href="torch__agent_8py_source.html#l00678">parlai.core.torch_agent.TorchAgent.metrics</a>, and <a class="el" href="torch__ranker__agent_8py_source.html#l00168">parlai.core.torch_ranker_agent.TorchRankerAgent.rank_top_k</a>.</p>

<p class="reference">Referenced by <a class="el" href="torch__ranker__agent_8py_source.html#l00335">parlai.core.torch_ranker_agent.TorchRankerAgent.train_step()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_af07f02ac90d3d11c572d0c5c0b1ed9de_icgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_af07f02ac90d3d11c572d0c5c0b1ed9de_icgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_af07f02ac90d3d11c572d0c5c0b1ed9de_icgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_af07f02ac90d3d11c572d0c5c0b1ed9de_icgraph">
<area shape="rect" title=" " alt="" coords="945,65,1124,121"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a05ddf921f386f21116ec0ef50796987a" title=" " alt="" coords="663,72,897,113"/>
<area shape="rect" href="classtransresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent.html#a057eb1109f5c2ea467539083e2f7e7f6" title=" " alt="" coords="292,104,615,145"/>
<area shape="rect" href="classtransresnet_1_1transresnet_1_1TransresnetAgent.html#a5eadf6ccc4b1d15a520a70d111bff493" title=" " alt="" coords="360,39,547,80"/>
<area shape="rect" href="classtransresnet_1_1transresnet_1_1TransresnetAgent.html#ad59fea461b2ea1f9731742901203bdd7" title=" " alt="" coords="45,5,205,47"/>
<area shape="rect" href="classmastering__the__dungeon_1_1agents_1_1graph__world2_1_1agents_1_1ModelAgentBase.html#a768f25fa424b2cd4d1de8e62bfed970a" title=" " alt="" coords="5,71,244,112"/>
<area shape="rect" href="classagent_1_1memnn__feedback_1_1MemnnFeedbackAgent.html#ab221141e0a956be465e718bb349e7554" title=" " alt="" coords="21,136,229,177"/>
<area shape="rect" href="classkvmemnn_1_1KvmemnnAgent.html#a6f57723b871277392a3f3fd627c717d8" title=" " alt="" coords="25,202,224,229"/>
</map>
</div>

</div>
</div>
<a id="ab7dd6d6207a4736c34620e0c85c396b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7dd6d6207a4736c34620e0c85c396b0">&#9670;&nbsp;</a></span>_make_candidate_encs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent._make_candidate_encs </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vecs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Encode candidates from candidate vectors.

Requires encode_candidates() to be implemented.
</pre> 
<p>Reimplemented in <a class="el" href="classparlai_1_1agents_1_1transformer_1_1polyencoder_1_1PolyencoderAgent.html#a3ed603baccf486a6121f26a962e6dc68">parlai.agents.transformer.polyencoder.PolyencoderAgent</a>.</p>

<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00910">910</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">References <a class="el" href="memnn_8py_source.html#l00117">parlai.agents.memnn.memnn.MemnnAgent.encode_candidates()</a>, <a class="el" href="polyencoder_8py_source.html#l00142">parlai.agents.transformer.polyencoder.PolyencoderAgent.encode_candidates()</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00145">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.encode_candidates()</a>, <a class="el" href="transformer_8py_source.html#l00235">parlai.agents.transformer.transformer.TransformerRankerAgent.encode_candidates()</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00893">parlai.core.torch_ranker_agent.TorchRankerAgent.encode_candidates()</a>, <a class="el" href="crossencoder_8py_source.html#l00028">parlai.agents.transformer.crossencoder.CrossencoderAgent.model</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00050">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.model</a>, <a class="el" href="cross__encoder__ranker_8py_source.html#l00074">parlai.agents.bert_ranker.cross_encoder_ranker.CrossEncoderRankerAgent.model</a>, <a class="el" href="dummy__torch__agent_8py_source.html#l00079">parlai.agents.test_agents.dummy_torch_agent.MockTorchAgent.model</a>, <a class="el" href="polyencoder_8py_source.html#l00099">parlai.agents.transformer.polyencoder.PolyencoderAgent.model</a>, <a class="el" href="memnn__v0_8py_source.html#l00104">parlai.agents.legacy_agents.memnn.memnn_v0.MemnnAgent.model</a>, <a class="el" href="drqa_8py_source.html#l00123">parlai.agents.drqa.drqa.DrqaAgent.model</a>, <a class="el" href="language__model_8py_source.html#l00173">parlai.agents.language_model.language_model.LanguageModelAgent.model</a>, <a class="el" href="transformer_8py_source.html#l00185">parlai.agents.transformer.transformer.TransformerRankerAgent.model</a>, <a class="el" href="starspace_8py_source.html#l00193">parlai.agents.starspace.starspace.StarspaceAgent.model</a>, <a class="el" href="seq2seq__v1_8py_source.html#l00230">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.model</a>, <a class="el" href="fairseq_8py_source.html#l00354">parlai.agents.fairseq.fairseq.FairseqAgent.model</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00381">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.model</a>, and <a class="el" href="torch__agent_8py_source.html#l00689">parlai.core.torch_agent.TorchAgent.model</a>.</p>

<p class="reference">Referenced by <a class="el" href="torch__ranker__agent_8py_source.html#l00785">parlai.core.torch_ranker_agent.TorchRankerAgent.set_fixed_candidates()</a>, and <a class="el" href="torch__ranker__agent_8py_source.html#l00740">parlai.core.torch_ranker_agent.TorchRankerAgent.set_vocab_candidates()</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_ab7dd6d6207a4736c34620e0c85c396b0_cgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_ab7dd6d6207a4736c34620e0c85c396b0_cgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_ab7dd6d6207a4736c34620e0c85c396b0_cgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_ab7dd6d6207a4736c34620e0c85c396b0_cgraph">
<area shape="rect" title=" " alt="" coords="5,143,184,199"/>
<area shape="rect" href="classparlai_1_1agents_1_1memnn_1_1memnn_1_1MemnnAgent.html#ab0c47ca129aeec437446202c941e0a56" title=" " alt="" coords="247,5,461,47"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1polyencoder_1_1PolyencoderAgent.html#ae73fe8d98b46a7ef18ef7115f29c999d" title=" " alt="" coords="232,71,476,112"/>
<area shape="rect" href="classparlai_1_1agents_1_1bert__ranker_1_1bi__encoder__ranker_1_1BiEncoderRankerAgent.html#a98361c5172041c64dc2da76ab9b654a7" title=" " alt="" coords="252,136,456,207"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1transformer_1_1TransformerRankerAgent.html#a6067345dff7fefda2809ea3bd63cd8fd" title=" " alt="" coords="234,231,474,287"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a1c8e4925f558783a51a28ccb577c42c7" title=" " alt="" coords="244,311,464,367"/>
</map>
</div>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_ab7dd6d6207a4736c34620e0c85c396b0_icgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_ab7dd6d6207a4736c34620e0c85c396b0_icgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_ab7dd6d6207a4736c34620e0c85c396b0_icgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_ab7dd6d6207a4736c34620e0c85c396b0_icgraph">
<area shape="rect" title=" " alt="" coords="476,45,655,101"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a9039757596f98b45b6676b16589883a3" title=" " alt="" coords="232,5,428,61"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a41c604613a97e566bfcc31667d0dfc6a" title=" " alt="" coords="232,85,428,141"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#acde404a79bf3678bb52d3e6c3ee5244a" title=" " alt="" coords="5,45,184,101"/>
</map>
</div>

</div>
</div>
<a id="aeceb8a86a165dd9f97b9f8270462a828"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeceb8a86a165dd9f97b9f8270462a828">&#9670;&nbsp;</a></span>_make_candidate_vecs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent._make_candidate_vecs </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cands</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Prebuild cached vectors for fixed candidates.</pre> 
<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00875">875</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">References <a class="el" href="polyencoder_8py_source.html#l00122">parlai.agents.transformer.polyencoder.PolyencoderAgent.vectorize_fixed_candidates()</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00135">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.vectorize_fixed_candidates()</a>, and <a class="el" href="torch__ranker__agent_8py_source.html#l00930">parlai.core.torch_ranker_agent.TorchRankerAgent.vectorize_fixed_candidates()</a>.</p>

<p class="reference">Referenced by <a class="el" href="torch__ranker__agent_8py_source.html#l00785">parlai.core.torch_ranker_agent.TorchRankerAgent.set_fixed_candidates()</a>.</p>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_aeceb8a86a165dd9f97b9f8270462a828_cgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_aeceb8a86a165dd9f97b9f8270462a828_cgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_aeceb8a86a165dd9f97b9f8270462a828_cgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_aeceb8a86a165dd9f97b9f8270462a828_cgraph">
<area shape="rect" title=" " alt="" coords="5,85,184,141"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1polyencoder_1_1PolyencoderAgent.html#abad70d30cc642022a7cc33390e0816f5" title=" " alt="" coords="232,5,476,61"/>
<area shape="rect" href="classparlai_1_1agents_1_1bert__ranker_1_1bi__encoder__ranker_1_1BiEncoderRankerAgent.html#a3062adbae2449553b4a6e12c5973116d" title=" " alt="" coords="247,166,461,237"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#af2e2d618f056bb68089c7252fa07d07b" title=" " alt="" coords="239,85,469,141"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1biencoder_1_1BiencoderAgent.html#ac9fa75abc94cb2b53c429a4a3b5a133c" title=" " alt="" coords="524,57,755,98"/>
<area shape="rect" href="classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#ac698ff0226e4d22f8498a9d9e667a34c" title=" " alt="" coords="561,122,718,193"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a024c4a0801e7dddf54bf3222dc77eaf6" title=" " alt="" coords="548,217,731,258"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a1689490829a70677359cf4f49ccd46bb" title=" " alt="" coords="818,121,977,177"/>
<area shape="rect" href="classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a07964fbca57736f639fe4e9dd9d1459a" title=" " alt="" coords="819,202,976,273"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#afb729d5d51ad91d4188fd1486a4a087f" title=" " alt="" coords="803,297,992,338"/>
</map>
</div>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_aeceb8a86a165dd9f97b9f8270462a828_icgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_aeceb8a86a165dd9f97b9f8270462a828_icgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_aeceb8a86a165dd9f97b9f8270462a828_icgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_aeceb8a86a165dd9f97b9f8270462a828_icgraph">
<area shape="rect" title=" " alt="" coords="476,5,655,61"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a9039757596f98b45b6676b16589883a3" title=" " alt="" coords="232,5,428,61"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#acde404a79bf3678bb52d3e6c3ee5244a" title=" " alt="" coords="5,5,184,61"/>
</map>
</div>

</div>
</div>
<a id="a2b802aa31db32a224da530c668a68e84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b802aa31db32a224da530c668a68e84">&#9670;&nbsp;</a></span>_save_candidates()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent._save_candidates </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vecs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cand_type</em> = <code>'vectors'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Save cached vectors.</pre> 
<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00887">887</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="torch__ranker__agent_8py_source.html#l00785">parlai.core.torch_ranker_agent.TorchRankerAgent.set_fixed_candidates()</a>.</p>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a2b802aa31db32a224da530c668a68e84_icgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a2b802aa31db32a224da530c668a68e84_icgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a2b802aa31db32a224da530c668a68e84_icgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a2b802aa31db32a224da530c668a68e84_icgraph">
<area shape="rect" title=" " alt="" coords="476,5,655,61"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a9039757596f98b45b6676b16589883a3" title=" " alt="" coords="232,5,428,61"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#acde404a79bf3678bb52d3e6c3ee5244a" title=" " alt="" coords="5,5,184,61"/>
</map>
</div>

</div>
</div>
<a id="a0d2bb555a535cc34b958829ea92120d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d2bb555a535cc34b958829ea92120d5">&#9670;&nbsp;</a></span>_set_label_cands_vec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent._set_label_cands_vec </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**&#160;</td>
          <td class="paramname"><em>kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Set the 'label_candidates_vec' field in the observation.

Useful to override to change vectorization behavior.
</pre> 
<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00466">466</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">References <a class="el" href="memnn_2modules__v0_8py_source.html#l00017">parlai.agents.legacy_agents.memnn.modules_v0.MemNN.opt</a>, <a class="el" href="parlai_2agents_2language__model_2modules_8py_source.html#l00018">parlai.agents.language_model.modules.RNNModel.opt</a>, <a class="el" href="rnn__reader_8py_source.html#l00019">parlai.agents.drqa.rnn_reader.RnnDocReader.opt</a>, <a class="el" href="model_8py_source.html#l00024">parlai.agents.drqa.model.DocReaderModel.opt</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00033">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Agent.opt</a>, <a class="el" href="parlai_2agents_2starspace_2modules_8py_source.html#l00036">parlai.agents.starspace.modules.Starspace.opt</a>, <a class="el" href="seq2seq_2modules__v0_8py_source.html#l00040">parlai.agents.legacy_agents.seq2seq.modules_v0.Seq2seq.opt</a>, <a class="el" href="unigram_8py_source.html#l00052">parlai.agents.unigram.unigram.UnigramAgent.opt</a>, <a class="el" href="parlai_2core_2agents_8py_source.html#l00060">parlai.core.agents.Agent.opt</a>, <a class="el" href="remote__agent_8py_source.html#l00060">parlai.agents.remote_agent.remote_agent.RemoteAgentAgent.opt</a>, <a class="el" href="memnn__v0_8py_source.html#l00135">parlai.agents.legacy_agents.memnn.memnn_v0.MemnnAgent.opt</a>, <a class="el" href="parlai_2agents_2transformer_2modules_8py_source.html#l00137">parlai.agents.transformer.modules.TransformerMemNetModel.opt</a>, <a class="el" href="language__model_8py_source.html#l00169">parlai.agents.language_model.language_model.LanguageModelAgent.opt</a>, <a class="el" href="dict__v0_8py_source.html#l00196">parlai.agents.legacy_agents.seq2seq.dict_v0.DictionaryAgent.opt</a>, <a class="el" href="dict__v1_8py_source.html#l00206">parlai.agents.legacy_agents.seq2seq.dict_v1.DictionaryAgent.opt</a>, <a class="el" href="ir__baseline_8py_source.html#l00246">parlai.agents.ir_baseline.ir_baseline.IrBaselineAgent.opt</a>, <a class="el" href="torch__agent__v1_8py_source.html#l00295">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent.opt</a>, <a class="el" href="fairseq_8py_source.html#l00338">parlai.agents.fairseq.fairseq.FairseqAgent.opt</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00373">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.opt</a>, and <a class="el" href="starspace_8py_source.html#l00582">parlai.agents.starspace.starspace.StarspaceAgent.opt</a>.</p>

</div>
</div>
<a id="a8b16043428bbb29ee4a3ed28c2bbb472"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b16043428bbb29ee4a3ed28c2bbb472">&#9670;&nbsp;</a></span>add_cmdline_args()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent.add_cmdline_args </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cls</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>argparser</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Add CLI args.</pre> 
<p>Reimplemented from <a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a4a72bdd07d2cb5ce402d0058140cad0d">parlai.core.torch_agent.TorchAgent</a>.</p>

<p>Reimplemented in <a class="el" href="classparlai_1_1agents_1_1transformer_1_1transformer_1_1TransformerRankerAgent.html#a6836668a4c2394d7217631fed533a7ac">parlai.agents.transformer.transformer.TransformerRankerAgent</a>, <a class="el" href="classself__feeding_1_1self__feeding__agent_1_1SelfFeedingAgent.html#a7b8ee86c2feb4aec821218307549f888">self_feeding.self_feeding_agent.SelfFeedingAgent</a>, <a class="el" href="classparlai_1_1agents_1_1transformer_1_1crossencoder_1_1CrossencoderAgent.html#a931cdceebd1eceb9c20638271c86af7a">parlai.agents.transformer.crossencoder.CrossencoderAgent</a>, <a class="el" href="classparlai_1_1agents_1_1transformer_1_1polyencoder_1_1PolyencoderAgent.html#adbbf75b4d5b32529621ab9f6edbb904f">parlai.agents.transformer.polyencoder.PolyencoderAgent</a>, and <a class="el" href="classwizard__transformer__ranker_1_1wizard__transformer__ranker_1_1WizardTransformerRankerAgent.html#aa85f7625d15a4839dd4c887985f54ca1">wizard_transformer_ranker.wizard_transformer_ranker.WizardTransformerRankerAgent</a>.</p>

<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00038">38</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

</div>
</div>
<a id="a628050d71339298baafbaf678f94207d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a628050d71339298baafbaf678f94207d">&#9670;&nbsp;</a></span>block_repeats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent.block_repeats </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cand_preds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Heuristic to block a model repeating a line from the history.</pre> 
<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00450">450</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">References <a class="el" href="memnn__v0_8py_source.html#l00184">parlai.agents.legacy_agents.memnn.memnn_v0.MemnnAgent.history</a>, <a class="el" href="starspace_8py_source.html#l00187">parlai.agents.starspace.starspace.StarspaceAgent.history</a>, <a class="el" href="ir__baseline_8py_source.html#l00247">parlai.agents.ir_baseline.ir_baseline.IrBaselineAgent.history</a>, <a class="el" href="torch__agent__v1_8py_source.html#l00328">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent.history</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00357">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.history</a>, and <a class="el" href="torch__agent_8py_source.html#l00730">parlai.core.torch_agent.TorchAgent.history</a>.</p>

<p class="reference">Referenced by <a class="el" href="torch__ranker__agent_8py_source.html#l00383">parlai.core.torch_ranker_agent.TorchRankerAgent.eval_step()</a>.</p>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a628050d71339298baafbaf678f94207d_icgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a628050d71339298baafbaf678f94207d_icgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a628050d71339298baafbaf678f94207d_icgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a628050d71339298baafbaf678f94207d_icgraph">
<area shape="rect" title=" " alt="" coords="945,65,1155,121"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a65bca7841123e4c3df1e09f8c4eb397f" title=" " alt="" coords="663,72,897,113"/>
<area shape="rect" href="classtransresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent.html#a057eb1109f5c2ea467539083e2f7e7f6" title=" " alt="" coords="292,104,615,145"/>
<area shape="rect" href="classtransresnet_1_1transresnet_1_1TransresnetAgent.html#a5eadf6ccc4b1d15a520a70d111bff493" title=" " alt="" coords="360,39,547,80"/>
<area shape="rect" href="classtransresnet_1_1transresnet_1_1TransresnetAgent.html#ad59fea461b2ea1f9731742901203bdd7" title=" " alt="" coords="45,5,205,47"/>
<area shape="rect" href="classmastering__the__dungeon_1_1agents_1_1graph__world2_1_1agents_1_1ModelAgentBase.html#a768f25fa424b2cd4d1de8e62bfed970a" title=" " alt="" coords="5,71,244,112"/>
<area shape="rect" href="classagent_1_1memnn__feedback_1_1MemnnFeedbackAgent.html#ab221141e0a956be465e718bb349e7554" title=" " alt="" coords="21,136,229,177"/>
<area shape="rect" href="classkvmemnn_1_1KvmemnnAgent.html#a6f57723b871277392a3f3fd627c717d8" title=" " alt="" coords="25,202,224,229"/>
</map>
</div>

</div>
</div>
<a id="a16d004a75c5fee42cd13db4abe157b98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16d004a75c5fee42cd13db4abe157b98">&#9670;&nbsp;</a></span>build_criterion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent.build_criterion </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Construct and return the loss function.

By default torch.nn.CrossEntropyLoss.
</pre> 
<p>Reimplemented in <a class="el" href="classparlai_1_1agents_1_1transformer_1_1transformer_1_1TransformerRankerAgent.html#af91ef63ee5c7f7588a75e32587364c80">parlai.agents.transformer.transformer.TransformerRankerAgent</a>.</p>

<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00190">190</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="torch__ranker__agent_8py_source.html#l00129">parlai.core.torch_ranker_agent.TorchRankerAgent.__init__()</a>.</p>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a16d004a75c5fee42cd13db4abe157b98_icgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a16d004a75c5fee42cd13db4abe157b98_icgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a16d004a75c5fee42cd13db4abe157b98_icgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a16d004a75c5fee42cd13db4abe157b98_icgraph">
<area shape="rect" title=" " alt="" coords="232,5,437,61"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#acde404a79bf3678bb52d3e6c3ee5244a" title=" " alt="" coords="5,5,184,61"/>
</map>
</div>

</div>
</div>
<a id="a1c8e4925f558783a51a28ccb577c42c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c8e4925f558783a51a28ccb577c42c7">&#9670;&nbsp;</a></span>encode_candidates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent.encode_candidates </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>padded_cands</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Convert the given candidates to vectors.

This is an abstract method that must be implemented by the user.

:param padded_cands:
    The padded candidates.
</pre> 
<p>Reimplemented in <a class="el" href="classparlai_1_1agents_1_1transformer_1_1transformer_1_1TransformerRankerAgent.html#a6067345dff7fefda2809ea3bd63cd8fd">parlai.agents.transformer.transformer.TransformerRankerAgent</a>, <a class="el" href="classparlai_1_1agents_1_1bert__ranker_1_1bi__encoder__ranker_1_1BiEncoderRankerAgent.html#a98361c5172041c64dc2da76ab9b654a7">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent</a>, <a class="el" href="classparlai_1_1agents_1_1transformer_1_1polyencoder_1_1PolyencoderAgent.html#ae73fe8d98b46a7ef18ef7115f29c999d">parlai.agents.transformer.polyencoder.PolyencoderAgent</a>, <a class="el" href="classparlai_1_1agents_1_1memnn_1_1memnn_1_1MemnnAgent.html#ab0c47ca129aeec437446202c941e0a56">parlai.agents.memnn.memnn.MemnnAgent</a>, and <a class="el" href="classself__feeding_1_1self__feeding__agent_1_1SelfFeedingAgent.html#ae156bc0076ea687e2d29cb2d1986b5db">self_feeding.self_feeding_agent.SelfFeedingAgent</a>.</p>

<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00893">893</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="torch__ranker__agent_8py_source.html#l00910">parlai.core.torch_ranker_agent.TorchRankerAgent._make_candidate_encs()</a>.</p>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a1c8e4925f558783a51a28ccb577c42c7_icgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a1c8e4925f558783a51a28ccb577c42c7_icgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a1c8e4925f558783a51a28ccb577c42c7_icgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a1c8e4925f558783a51a28ccb577c42c7_icgraph">
<area shape="rect" title=" " alt="" coords="703,45,923,101"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#ab7dd6d6207a4736c34620e0c85c396b0" title=" " alt="" coords="476,45,655,101"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a9039757596f98b45b6676b16589883a3" title=" " alt="" coords="232,5,428,61"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a41c604613a97e566bfcc31667d0dfc6a" title=" " alt="" coords="232,85,428,141"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#acde404a79bf3678bb52d3e6c3ee5244a" title=" " alt="" coords="5,45,184,101"/>
</map>
</div>

</div>
</div>
<a id="a65bca7841123e4c3df1e09f8c4eb397f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65bca7841123e4c3df1e09f8c4eb397f">&#9670;&nbsp;</a></span>eval_step()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent.eval_step </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Evaluate a single batch of examples.</pre> 
<p>Reimplemented from <a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a18de0a52aeec4ef721aedbdd6ac06cad">parlai.core.torch_agent.TorchAgent</a>.</p>

<p>Reimplemented in <a class="el" href="classself__feeding_1_1self__feeding__agent_1_1SelfFeedingAgent.html#a9f6ed50b9db65bede09f19810e05abc4">self_feeding.self_feeding_agent.SelfFeedingAgent</a>.</p>

<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00383">383</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">References <a class="el" href="torch__ranker__agent_8py_source.html#l00483">parlai.core.torch_ranker_agent.TorchRankerAgent._build_candidates()</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00450">parlai.core.torch_ranker_agent.TorchRankerAgent.block_repeats()</a>, <a class="el" href="dummy__torch__agent_8py_source.html#l00080">parlai.agents.test_agents.dummy_torch_agent.MockTorchAgent.criterion</a>, <a class="el" href="example__seq2seq_8py_source.html#l00161">parlai.agents.example_seq2seq.example_seq2seq.ExampleSeq2seqAgent.criterion</a>, <a class="el" href="starspace_8py_source.html#l00214">parlai.agents.starspace.starspace.StarspaceAgent.criterion</a>, <a class="el" href="language__model_8py_source.html#l00248">parlai.agents.language_model.language_model.LanguageModelAgent.criterion</a>, <a class="el" href="seq2seq__v1_8py_source.html#l00257">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.criterion</a>, <a class="el" href="fairseq_8py_source.html#l00353">parlai.agents.fairseq.fairseq.FairseqAgent.criterion</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00496">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.criterion</a>, <a class="el" href="torch__agent_8py_source.html#l00690">parlai.core.torch_agent.TorchAgent.criterion</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00201">parlai.core.torch_ranker_agent.TorchRankerAgent.encode_candidate_vecs</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00203">parlai.core.torch_ranker_agent.TorchRankerAgent.eval_candidates</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00804">parlai.core.torch_ranker_agent.TorchRankerAgent.fixed_candidate_encs</a>, <a class="el" href="language__model_8py_source.html#l00159">parlai.agents.language_model.language_model.LanguageModelAgent.metrics</a>, <a class="el" href="parlai_2core_2agents_8py_source.html#l00192">parlai.core.agents.Teacher.metrics</a>, <a class="el" href="fairseq_8py_source.html#l00222">parlai.agents.fairseq.fairseq.FairseqAgent.metrics</a>, <a class="el" href="seq2seq__v1_8py_source.html#l00231">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.metrics</a>, <a class="el" href="metrics_8py_source.html#l00237">parlai.core.metrics.Metrics.metrics</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00351">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.metrics</a>, <a class="el" href="torch__agent_8py_source.html#l00678">parlai.core.torch_agent.TorchAgent.metrics</a>, <a class="el" href="crossencoder_8py_source.html#l00028">parlai.agents.transformer.crossencoder.CrossencoderAgent.model</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00050">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.model</a>, <a class="el" href="cross__encoder__ranker_8py_source.html#l00074">parlai.agents.bert_ranker.cross_encoder_ranker.CrossEncoderRankerAgent.model</a>, <a class="el" href="dummy__torch__agent_8py_source.html#l00079">parlai.agents.test_agents.dummy_torch_agent.MockTorchAgent.model</a>, <a class="el" href="polyencoder_8py_source.html#l00099">parlai.agents.transformer.polyencoder.PolyencoderAgent.model</a>, <a class="el" href="memnn__v0_8py_source.html#l00104">parlai.agents.legacy_agents.memnn.memnn_v0.MemnnAgent.model</a>, <a class="el" href="drqa_8py_source.html#l00123">parlai.agents.drqa.drqa.DrqaAgent.model</a>, <a class="el" href="language__model_8py_source.html#l00173">parlai.agents.language_model.language_model.LanguageModelAgent.model</a>, <a class="el" href="transformer_8py_source.html#l00185">parlai.agents.transformer.transformer.TransformerRankerAgent.model</a>, <a class="el" href="starspace_8py_source.html#l00193">parlai.agents.starspace.starspace.StarspaceAgent.model</a>, <a class="el" href="seq2seq__v1_8py_source.html#l00230">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.model</a>, <a class="el" href="fairseq_8py_source.html#l00354">parlai.agents.fairseq.fairseq.FairseqAgent.model</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00381">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.model</a>, <a class="el" href="torch__agent_8py_source.html#l00689">parlai.core.torch_agent.TorchAgent.model</a>, <a class="el" href="memnn_2modules__v0_8py_source.html#l00017">parlai.agents.legacy_agents.memnn.modules_v0.MemNN.opt</a>, <a class="el" href="parlai_2agents_2language__model_2modules_8py_source.html#l00018">parlai.agents.language_model.modules.RNNModel.opt</a>, <a class="el" href="rnn__reader_8py_source.html#l00019">parlai.agents.drqa.rnn_reader.RnnDocReader.opt</a>, <a class="el" href="model_8py_source.html#l00024">parlai.agents.drqa.model.DocReaderModel.opt</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00033">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Agent.opt</a>, <a class="el" href="parlai_2agents_2starspace_2modules_8py_source.html#l00036">parlai.agents.starspace.modules.Starspace.opt</a>, <a class="el" href="seq2seq_2modules__v0_8py_source.html#l00040">parlai.agents.legacy_agents.seq2seq.modules_v0.Seq2seq.opt</a>, <a class="el" href="unigram_8py_source.html#l00052">parlai.agents.unigram.unigram.UnigramAgent.opt</a>, <a class="el" href="remote__agent_8py_source.html#l00060">parlai.agents.remote_agent.remote_agent.RemoteAgentAgent.opt</a>, <a class="el" href="parlai_2core_2agents_8py_source.html#l00060">parlai.core.agents.Agent.opt</a>, <a class="el" href="memnn__v0_8py_source.html#l00135">parlai.agents.legacy_agents.memnn.memnn_v0.MemnnAgent.opt</a>, <a class="el" href="parlai_2agents_2transformer_2modules_8py_source.html#l00137">parlai.agents.transformer.modules.TransformerMemNetModel.opt</a>, <a class="el" href="language__model_8py_source.html#l00169">parlai.agents.language_model.language_model.LanguageModelAgent.opt</a>, <a class="el" href="dict__v0_8py_source.html#l00196">parlai.agents.legacy_agents.seq2seq.dict_v0.DictionaryAgent.opt</a>, <a class="el" href="dict__v1_8py_source.html#l00206">parlai.agents.legacy_agents.seq2seq.dict_v1.DictionaryAgent.opt</a>, <a class="el" href="ir__baseline_8py_source.html#l00246">parlai.agents.ir_baseline.ir_baseline.IrBaselineAgent.opt</a>, <a class="el" href="torch__agent__v1_8py_source.html#l00295">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent.opt</a>, <a class="el" href="fairseq_8py_source.html#l00338">parlai.agents.fairseq.fairseq.FairseqAgent.opt</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00373">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.opt</a>, <a class="el" href="starspace_8py_source.html#l00582">parlai.agents.starspace.starspace.StarspaceAgent.opt</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00168">parlai.core.torch_ranker_agent.TorchRankerAgent.rank_top_k</a>, <a class="el" href="crossencoder_8py_source.html#l00059">parlai.agents.transformer.crossencoder.CrossencoderAgent.score_candidates()</a>, <a class="el" href="cross__encoder__ranker_8py_source.html#l00099">parlai.agents.bert_ranker.cross_encoder_ranker.CrossEncoderRankerAgent.score_candidates()</a>, <a class="el" href="memnn_8py_source.html#l00120">parlai.agents.memnn.memnn.MemnnAgent.score_candidates()</a>, <a class="el" href="polyencoder_8py_source.html#l00148">parlai.agents.transformer.polyencoder.PolyencoderAgent.score_candidates()</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00169">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.score_candidates()</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00235">parlai.core.torch_ranker_agent.TorchRankerAgent.score_candidates()</a>, <a class="el" href="transformer_8py_source.html#l00241">parlai.agents.transformer.transformer.TransformerRankerAgent.score_candidates()</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00084">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.vocab_candidate_encs</a>, and <a class="el" href="torch__ranker__agent_8py_source.html#l00750">parlai.core.torch_ranker_agent.TorchRankerAgent.vocab_candidate_encs</a>.</p>

<p class="reference">Referenced by <a class="el" href="projects_2image__chat_2transresnet__multimodal_2transresnet__multimodal_8py_source.html#l00243">transresnet_multimodal.transresnet_multimodal.TransresnetMultimodalAgent.batch_act()</a>, and <a class="el" href="projects_2personality__captions_2transresnet_2transresnet_8py_source.html#l00288">transresnet.transresnet.TransresnetAgent.batch_act()</a>.</p>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a65bca7841123e4c3df1e09f8c4eb397f_cgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a65bca7841123e4c3df1e09f8c4eb397f_cgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a65bca7841123e4c3df1e09f8c4eb397f_cgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a65bca7841123e4c3df1e09f8c4eb397f_cgraph">
<area shape="rect" title=" " alt="" coords="5,326,240,367"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#ac09793435e7b982a8b658411ca0b4502" title=" " alt="" coords="331,5,509,61"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a628050d71339298baafbaf678f94207d" title=" " alt="" coords="315,85,525,141"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1crossencoder_1_1CrossencoderAgent.html#a5c286ce0bc163e443e73182f95d6e0c6" title=" " alt="" coords="294,166,546,207"/>
<area shape="rect" href="classparlai_1_1agents_1_1bert__ranker_1_1cross__encoder__ranker_1_1CrossEncoderRankerAgent.html#a8d75c4d4bddd44381b232a974469c432" title=" " alt="" coords="288,231,552,302"/>
<area shape="rect" href="classparlai_1_1agents_1_1memnn_1_1memnn_1_1MemnnAgent.html#a10b5418eda4da7bc85913e24e5b5a029" title=" " alt="" coords="317,326,523,367"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1polyencoder_1_1PolyencoderAgent.html#ad75794f4004267ab538258bc2571235f" title=" " alt="" coords="298,391,542,433"/>
<area shape="rect" href="classparlai_1_1agents_1_1bert__ranker_1_1bi__encoder__ranker_1_1BiEncoderRankerAgent.html#ac8141b70cff9c26b945d112ad53b035c" title=" " alt="" coords="323,457,517,527"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a65d5726a4e2098212298bc2cdf13e70f" title=" " alt="" coords="315,552,525,608"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1transformer_1_1TransformerRankerAgent.html#af1af764f534c04a7bc98f11b3fe8f6ca" title=" " alt="" coords="300,632,540,688"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a42cd79a3d59c402422eca36285b2cd05" title=" " alt="" coords="631,5,809,61"/>
<area shape="rect" href="classparlai_1_1agents_1_1memnn_1_1memnn_1_1MemnnAgent.html#acee74d75f53f79b7c3e2ea83fa2b2e71" title=" " alt="" coords="623,326,817,367"/>
<area shape="rect" href="classparlai_1_1agents_1_1memnn_1_1memnn_1_1MemnnAgent.html#addba7308e8338d9bcab4ff49d5bbcfe5" title=" " alt="" coords="623,482,817,523"/>
<area shape="rect" href="classparlai_1_1agents_1_1memnn_1_1memnn_1_1MemnnAgent.html#a6639dabbc921ce131de09f1228979d2f" title=" " alt="" coords="888,326,1083,367"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1transformer_1_1TransformerRankerAgent.html#abdb49353d8bbff5e235dcd84a7b75844" title=" " alt="" coords="600,639,840,681"/>
</map>
</div>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a65bca7841123e4c3df1e09f8c4eb397f_icgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a65bca7841123e4c3df1e09f8c4eb397f_icgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a65bca7841123e4c3df1e09f8c4eb397f_icgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a65bca7841123e4c3df1e09f8c4eb397f_icgraph">
<area shape="rect" title=" " alt="" coords="663,72,897,113"/>
<area shape="rect" href="classtransresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent.html#a057eb1109f5c2ea467539083e2f7e7f6" title=" " alt="" coords="292,104,615,145"/>
<area shape="rect" href="classtransresnet_1_1transresnet_1_1TransresnetAgent.html#a5eadf6ccc4b1d15a520a70d111bff493" title=" " alt="" coords="360,39,547,80"/>
<area shape="rect" href="classtransresnet_1_1transresnet_1_1TransresnetAgent.html#ad59fea461b2ea1f9731742901203bdd7" title=" " alt="" coords="45,5,205,47"/>
<area shape="rect" href="classmastering__the__dungeon_1_1agents_1_1graph__world2_1_1agents_1_1ModelAgentBase.html#a768f25fa424b2cd4d1de8e62bfed970a" title=" " alt="" coords="5,71,244,112"/>
<area shape="rect" href="classagent_1_1memnn__feedback_1_1MemnnFeedbackAgent.html#ab221141e0a956be465e718bb349e7554" title=" " alt="" coords="21,136,229,177"/>
<area shape="rect" href="classkvmemnn_1_1KvmemnnAgent.html#a6f57723b871277392a3f3fd627c717d8" title=" " alt="" coords="25,202,224,229"/>
</map>
</div>

</div>
</div>
<a id="a3a80c3eb68b019859da2a83706c3844d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a80c3eb68b019859da2a83706c3844d">&#9670;&nbsp;</a></span>is_valid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent.is_valid </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>obs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Override from TorchAgent.

Check to see if label candidates contain the label.
</pre> 
<p>Reimplemented from <a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#afa491bf2384b017711ad722b5341b405">parlai.core.torch_agent.TorchAgent</a>.</p>

<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00308">308</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">References <a class="el" href="torch__ranker__agent_8py_source.html#l00204">parlai.core.torch_ranker_agent.TorchRankerAgent.ignore_bad_candidates</a>.</p>

</div>
</div>
<a id="a353991d201d8889c453bf72c15ec78a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a353991d201d8889c453bf72c15ec78a9">&#9670;&nbsp;</a></span>load_candidates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent.load_candidates </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cand_type</em> = <code>'vectors'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Load fixed candidates from a path.</pre> 
<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00870">870</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="torch__ranker__agent_8py_source.html#l00785">parlai.core.torch_ranker_agent.TorchRankerAgent.set_fixed_candidates()</a>, and <a class="el" href="bi__encoder__ranker_8py_source.html#l00074">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.set_vocab_candidates()</a>.</p>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a353991d201d8889c453bf72c15ec78a9_icgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a353991d201d8889c453bf72c15ec78a9_icgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a353991d201d8889c453bf72c15ec78a9_icgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a353991d201d8889c453bf72c15ec78a9_icgraph">
<area shape="rect" title=" " alt="" coords="476,49,679,105"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a9039757596f98b45b6676b16589883a3" title=" " alt="" coords="232,5,428,61"/>
<area shape="rect" href="classparlai_1_1agents_1_1bert__ranker_1_1bi__encoder__ranker_1_1BiEncoderRankerAgent.html#acdfa23a21c8364e7205093a5af51264f" title=" " alt="" coords="240,86,420,157"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#acde404a79bf3678bb52d3e6c3ee5244a" title=" " alt="" coords="5,49,184,105"/>
</map>
</div>

</div>
</div>
<a id="a6314748dfa9aaf6e26145af686d5787d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6314748dfa9aaf6e26145af686d5787d">&#9670;&nbsp;</a></span>report()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent.report </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Report loss and mean_rank from model's perspective.</pre> 
<p>Reimplemented from <a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#ac694770cd4022eb047bf6fbb8f46035c">parlai.core.torch_agent.TorchAgent</a>.</p>

<p>Reimplemented in <a class="el" href="classself__feeding_1_1self__feeding__agent_1_1SelfFeedingAgent.html#a0731b4f9dc3e9763fbccaf48e531f3c6">self_feeding.self_feeding_agent.SelfFeedingAgent</a>.</p>

<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00720">720</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">References <a class="el" href="torch__ranker__agent_8py_source.html#l00200">parlai.core.torch_ranker_agent.TorchRankerAgent.candidates</a>, <a class="el" href="language__model_8py_source.html#l00244">parlai.agents.language_model.language_model.LanguageModelAgent.is_training</a>, <a class="el" href="fairseq_8py_source.html#l00523">parlai.agents.fairseq.fairseq.FairseqAgent.is_training</a>, <a class="el" href="torch__agent_8py_source.html#l00732">parlai.core.torch_agent.TorchAgent.is_training</a>, <a class="el" href="language__model_8py_source.html#l00159">parlai.agents.language_model.language_model.LanguageModelAgent.metrics</a>, <a class="el" href="parlai_2core_2agents_8py_source.html#l00192">parlai.core.agents.Teacher.metrics</a>, <a class="el" href="fairseq_8py_source.html#l00222">parlai.agents.fairseq.fairseq.FairseqAgent.metrics</a>, <a class="el" href="seq2seq__v1_8py_source.html#l00231">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.metrics</a>, <a class="el" href="metrics_8py_source.html#l00237">parlai.core.metrics.Metrics.metrics</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00351">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.metrics</a>, <a class="el" href="torch__agent_8py_source.html#l00678">parlai.core.torch_agent.TorchAgent.metrics</a>, <a class="el" href="memnn_2modules__v0_8py_source.html#l00017">parlai.agents.legacy_agents.memnn.modules_v0.MemNN.opt</a>, <a class="el" href="parlai_2agents_2language__model_2modules_8py_source.html#l00018">parlai.agents.language_model.modules.RNNModel.opt</a>, <a class="el" href="rnn__reader_8py_source.html#l00019">parlai.agents.drqa.rnn_reader.RnnDocReader.opt</a>, <a class="el" href="model_8py_source.html#l00024">parlai.agents.drqa.model.DocReaderModel.opt</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00033">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Agent.opt</a>, <a class="el" href="parlai_2agents_2starspace_2modules_8py_source.html#l00036">parlai.agents.starspace.modules.Starspace.opt</a>, <a class="el" href="seq2seq_2modules__v0_8py_source.html#l00040">parlai.agents.legacy_agents.seq2seq.modules_v0.Seq2seq.opt</a>, <a class="el" href="unigram_8py_source.html#l00052">parlai.agents.unigram.unigram.UnigramAgent.opt</a>, <a class="el" href="remote__agent_8py_source.html#l00060">parlai.agents.remote_agent.remote_agent.RemoteAgentAgent.opt</a>, <a class="el" href="parlai_2core_2agents_8py_source.html#l00060">parlai.core.agents.Agent.opt</a>, <a class="el" href="memnn__v0_8py_source.html#l00135">parlai.agents.legacy_agents.memnn.memnn_v0.MemnnAgent.opt</a>, <a class="el" href="parlai_2agents_2transformer_2modules_8py_source.html#l00137">parlai.agents.transformer.modules.TransformerMemNetModel.opt</a>, <a class="el" href="language__model_8py_source.html#l00169">parlai.agents.language_model.language_model.LanguageModelAgent.opt</a>, <a class="el" href="dict__v0_8py_source.html#l00196">parlai.agents.legacy_agents.seq2seq.dict_v0.DictionaryAgent.opt</a>, <a class="el" href="dict__v1_8py_source.html#l00206">parlai.agents.legacy_agents.seq2seq.dict_v1.DictionaryAgent.opt</a>, <a class="el" href="ir__baseline_8py_source.html#l00246">parlai.agents.ir_baseline.ir_baseline.IrBaselineAgent.opt</a>, <a class="el" href="torch__agent__v1_8py_source.html#l00295">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent.opt</a>, <a class="el" href="fairseq_8py_source.html#l00338">parlai.agents.fairseq.fairseq.FairseqAgent.opt</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00373">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.opt</a>, and <a class="el" href="starspace_8py_source.html#l00582">parlai.agents.starspace.starspace.StarspaceAgent.opt</a>.</p>

</div>
</div>
<a id="ab526b2171567fd980451a795bb639cda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab526b2171567fd980451a795bb639cda">&#9670;&nbsp;</a></span>reset_metrics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent.reset_metrics </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Reset metrics.</pre> 
<p>Reimplemented from <a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a03e18955cfd44dd019d0847bc7a46893">parlai.core.torch_agent.TorchAgent</a>.</p>

<p>Reimplemented in <a class="el" href="classself__feeding_1_1self__feeding__agent_1_1SelfFeedingAgent.html#a2776d1c54e11c170e50add2d20cd2633">self_feeding.self_feeding_agent.SelfFeedingAgent</a>.</p>

<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00709">709</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">References <a class="el" href="language__model_8py_source.html#l00159">parlai.agents.language_model.language_model.LanguageModelAgent.metrics</a>, <a class="el" href="parlai_2core_2agents_8py_source.html#l00192">parlai.core.agents.Teacher.metrics</a>, <a class="el" href="fairseq_8py_source.html#l00222">parlai.agents.fairseq.fairseq.FairseqAgent.metrics</a>, <a class="el" href="seq2seq__v1_8py_source.html#l00231">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.metrics</a>, <a class="el" href="metrics_8py_source.html#l00237">parlai.core.metrics.Metrics.metrics</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00351">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.metrics</a>, and <a class="el" href="torch__agent_8py_source.html#l00678">parlai.core.torch_agent.TorchAgent.metrics</a>.</p>

</div>
</div>
<a id="a65d5726a4e2098212298bc2cdf13e70f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65d5726a4e2098212298bc2cdf13e70f">&#9670;&nbsp;</a></span>score_candidates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent.score_candidates </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cand_vecs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cand_encs</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Given a batch and candidate set, return scores (for ranking).

:param Batch batch:
    a Batch object (defined in torch_agent.py)
:param LongTensor cand_vecs:
    padded and tokenized candidates
:param FloatTensor cand_encs:
    encoded candidates, if these are passed into the function (in cases
    where we cache the candidate encodings), you do not need to call
    self.model on cand_vecs
</pre> 
<p>Reimplemented in <a class="el" href="classparlai_1_1agents_1_1transformer_1_1transformer_1_1TransformerRankerAgent.html#af1af764f534c04a7bc98f11b3fe8f6ca">parlai.agents.transformer.transformer.TransformerRankerAgent</a>, <a class="el" href="classparlai_1_1agents_1_1bert__ranker_1_1bi__encoder__ranker_1_1BiEncoderRankerAgent.html#ac8141b70cff9c26b945d112ad53b035c">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent</a>, <a class="el" href="classparlai_1_1agents_1_1transformer_1_1polyencoder_1_1PolyencoderAgent.html#ad75794f4004267ab538258bc2571235f">parlai.agents.transformer.polyencoder.PolyencoderAgent</a>, <a class="el" href="classparlai_1_1agents_1_1memnn_1_1memnn_1_1MemnnAgent.html#a10b5418eda4da7bc85913e24e5b5a029">parlai.agents.memnn.memnn.MemnnAgent</a>, <a class="el" href="classparlai_1_1agents_1_1bert__ranker_1_1cross__encoder__ranker_1_1CrossEncoderRankerAgent.html#a8d75c4d4bddd44381b232a974469c432">parlai.agents.bert_ranker.cross_encoder_ranker.CrossEncoderRankerAgent</a>, and <a class="el" href="classparlai_1_1agents_1_1transformer_1_1crossencoder_1_1CrossencoderAgent.html#a5c286ce0bc163e443e73182f95d6e0c6">parlai.agents.transformer.crossencoder.CrossencoderAgent</a>.</p>

<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00235">235</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="torch__ranker__agent_8py_source.html#l00383">parlai.core.torch_ranker_agent.TorchRankerAgent.eval_step()</a>, and <a class="el" href="torch__ranker__agent_8py_source.html#l00335">parlai.core.torch_ranker_agent.TorchRankerAgent.train_step()</a>.</p>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a65d5726a4e2098212298bc2cdf13e70f_icgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a65d5726a4e2098212298bc2cdf13e70f_icgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a65d5726a4e2098212298bc2cdf13e70f_icgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a65d5726a4e2098212298bc2cdf13e70f_icgraph">
<area shape="rect" title=" " alt="" coords="945,65,1156,121"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a65bca7841123e4c3df1e09f8c4eb397f" title=" " alt="" coords="663,39,897,80"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a05ddf921f386f21116ec0ef50796987a" title=" " alt="" coords="663,104,897,145"/>
<area shape="rect" href="classtransresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent.html#a057eb1109f5c2ea467539083e2f7e7f6" title=" " alt="" coords="292,104,615,145"/>
<area shape="rect" href="classtransresnet_1_1transresnet_1_1TransresnetAgent.html#a5eadf6ccc4b1d15a520a70d111bff493" title=" " alt="" coords="360,39,547,80"/>
<area shape="rect" href="classtransresnet_1_1transresnet_1_1TransresnetAgent.html#ad59fea461b2ea1f9731742901203bdd7" title=" " alt="" coords="45,5,205,47"/>
<area shape="rect" href="classmastering__the__dungeon_1_1agents_1_1graph__world2_1_1agents_1_1ModelAgentBase.html#a768f25fa424b2cd4d1de8e62bfed970a" title=" " alt="" coords="5,71,244,112"/>
<area shape="rect" href="classagent_1_1memnn__feedback_1_1MemnnFeedbackAgent.html#ab221141e0a956be465e718bb349e7554" title=" " alt="" coords="21,136,229,177"/>
<area shape="rect" href="classkvmemnn_1_1KvmemnnAgent.html#a6f57723b871277392a3f3fd627c717d8" title=" " alt="" coords="25,202,224,229"/>
</map>
</div>

</div>
</div>
<a id="a9039757596f98b45b6676b16589883a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9039757596f98b45b6676b16589883a3">&#9670;&nbsp;</a></span>set_fixed_candidates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent.set_fixed_candidates </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shared</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Load a set of fixed candidates and their vectors (or vectorize them here).

self.fixed_candidates will contain a [num_cands] list of strings
self.fixed_candidate_vecs will contain a [num_cands, seq_len] LongTensor

See the note on the --fixed-candidate-vecs flag for an explanation of the
'reuse', 'replace', or path options.

Note: TorchRankerAgent by default converts candidates to vectors by vectorizing
in the common sense (i.e., replacing each token with its index in the
dictionary). If a child model wants to additionally perform encoding, it can
overwrite the vectorize_fixed_candidates() method to produce encoded vectors
instead of just vectorized ones.
</pre> 
<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00785">785</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">References <a class="el" href="polyencoder_8py_source.html#l00132">parlai.agents.transformer.polyencoder.PolyencoderAgent._make_candidate_encs()</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00910">parlai.core.torch_ranker_agent.TorchRankerAgent._make_candidate_encs()</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00875">parlai.core.torch_ranker_agent.TorchRankerAgent._make_candidate_vecs()</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00887">parlai.core.torch_ranker_agent.TorchRankerAgent._save_candidates()</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00200">parlai.core.torch_ranker_agent.TorchRankerAgent.candidates</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00201">parlai.core.torch_ranker_agent.TorchRankerAgent.encode_candidate_vecs</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00203">parlai.core.torch_ranker_agent.TorchRankerAgent.eval_candidates</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00804">parlai.core.torch_ranker_agent.TorchRankerAgent.fixed_candidate_encs</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00803">parlai.core.torch_ranker_agent.TorchRankerAgent.fixed_candidate_vecs</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00802">parlai.core.torch_ranker_agent.TorchRankerAgent.fixed_candidates</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00205">parlai.core.torch_ranker_agent.TorchRankerAgent.fixed_candidates_path</a>, <a class="el" href="torch__agent_8py_source.html#l00661">parlai.core.torch_agent.TorchAgent.fp16</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00218">parlai.core.torch_ranker_agent.TorchRankerAgent.get_task_candidates_path()</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00870">parlai.core.torch_ranker_agent.TorchRankerAgent.load_candidates()</a>, <a class="el" href="memnn_2modules__v0_8py_source.html#l00017">parlai.agents.legacy_agents.memnn.modules_v0.MemNN.opt</a>, <a class="el" href="parlai_2agents_2language__model_2modules_8py_source.html#l00018">parlai.agents.language_model.modules.RNNModel.opt</a>, <a class="el" href="rnn__reader_8py_source.html#l00019">parlai.agents.drqa.rnn_reader.RnnDocReader.opt</a>, <a class="el" href="model_8py_source.html#l00024">parlai.agents.drqa.model.DocReaderModel.opt</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00033">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Agent.opt</a>, <a class="el" href="parlai_2agents_2starspace_2modules_8py_source.html#l00036">parlai.agents.starspace.modules.Starspace.opt</a>, <a class="el" href="seq2seq_2modules__v0_8py_source.html#l00040">parlai.agents.legacy_agents.seq2seq.modules_v0.Seq2seq.opt</a>, <a class="el" href="unigram_8py_source.html#l00052">parlai.agents.unigram.unigram.UnigramAgent.opt</a>, <a class="el" href="remote__agent_8py_source.html#l00060">parlai.agents.remote_agent.remote_agent.RemoteAgentAgent.opt</a>, <a class="el" href="parlai_2core_2agents_8py_source.html#l00060">parlai.core.agents.Agent.opt</a>, <a class="el" href="memnn__v0_8py_source.html#l00135">parlai.agents.legacy_agents.memnn.memnn_v0.MemnnAgent.opt</a>, <a class="el" href="parlai_2agents_2transformer_2modules_8py_source.html#l00137">parlai.agents.transformer.modules.TransformerMemNetModel.opt</a>, <a class="el" href="language__model_8py_source.html#l00169">parlai.agents.language_model.language_model.LanguageModelAgent.opt</a>, <a class="el" href="dict__v0_8py_source.html#l00196">parlai.agents.legacy_agents.seq2seq.dict_v0.DictionaryAgent.opt</a>, <a class="el" href="dict__v1_8py_source.html#l00206">parlai.agents.legacy_agents.seq2seq.dict_v1.DictionaryAgent.opt</a>, <a class="el" href="ir__baseline_8py_source.html#l00246">parlai.agents.ir_baseline.ir_baseline.IrBaselineAgent.opt</a>, <a class="el" href="torch__agent__v1_8py_source.html#l00295">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent.opt</a>, <a class="el" href="fairseq_8py_source.html#l00338">parlai.agents.fairseq.fairseq.FairseqAgent.opt</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00373">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.opt</a>, <a class="el" href="starspace_8py_source.html#l00582">parlai.agents.starspace.starspace.StarspaceAgent.opt</a>, <a class="el" href="image__featurizers_8py_source.html#l00024">parlai.core.image_featurizers.ImageLoader.use_cuda</a>, <a class="el" href="memnn_2modules__v0_8py_source.html#l00048">parlai.agents.legacy_agents.memnn.modules_v0.MemNN.use_cuda</a>, <a class="el" href="memnn__v0_8py_source.html#l00096">parlai.agents.legacy_agents.memnn.memnn_v0.MemnnAgent.use_cuda</a>, <a class="el" href="language__model_8py_source.html#l00162">parlai.agents.language_model.language_model.LanguageModelAgent.use_cuda</a>, <a class="el" href="torch__agent__v1_8py_source.html#l00303">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent.use_cuda</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00367">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.use_cuda</a>, and <a class="el" href="torch__agent_8py_source.html#l00654">parlai.core.torch_agent.TorchAgent.use_cuda</a>.</p>

<p class="reference">Referenced by <a class="el" href="torch__ranker__agent_8py_source.html#l00129">parlai.core.torch_ranker_agent.TorchRankerAgent.__init__()</a>.</p>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a9039757596f98b45b6676b16589883a3_cgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a9039757596f98b45b6676b16589883a3_cgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a9039757596f98b45b6676b16589883a3_cgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a9039757596f98b45b6676b16589883a3_cgraph">
<area shape="rect" title=" " alt="" coords="5,433,201,489"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1polyencoder_1_1PolyencoderAgent.html#a3ed603baccf486a6121f26a962e6dc68" title=" " alt="" coords="249,180,519,221"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#ab7dd6d6207a4736c34620e0c85c396b0" title=" " alt="" coords="295,246,473,302"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#aeceb8a86a165dd9f97b9f8270462a828" title=" " alt="" coords="295,393,473,449"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a2b802aa31db32a224da530c668a68e84" title=" " alt="" coords="295,473,473,529"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a936cebe646816609dd1d4f56b9490d45" title=" " alt="" coords="286,553,482,609"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a353991d201d8889c453bf72c15ec78a9" title=" " alt="" coords="283,633,485,689"/>
<area shape="rect" href="classparlai_1_1agents_1_1memnn_1_1memnn_1_1MemnnAgent.html#ab0c47ca129aeec437446202c941e0a56" title=" " alt="" coords="581,327,796,368"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1polyencoder_1_1PolyencoderAgent.html#ae73fe8d98b46a7ef18ef7115f29c999d" title=" " alt="" coords="567,5,811,47"/>
<area shape="rect" href="classparlai_1_1agents_1_1bert__ranker_1_1bi__encoder__ranker_1_1BiEncoderRankerAgent.html#a98361c5172041c64dc2da76ab9b654a7" title=" " alt="" coords="587,71,791,141"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1transformer_1_1TransformerRankerAgent.html#a6067345dff7fefda2809ea3bd63cd8fd" title=" " alt="" coords="569,166,809,222"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a1c8e4925f558783a51a28ccb577c42c7" title=" " alt="" coords="579,246,799,302"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1polyencoder_1_1PolyencoderAgent.html#abad70d30cc642022a7cc33390e0816f5" title=" " alt="" coords="567,393,811,449"/>
<area shape="rect" href="classparlai_1_1agents_1_1bert__ranker_1_1bi__encoder__ranker_1_1BiEncoderRankerAgent.html#a3062adbae2449553b4a6e12c5973116d" title=" " alt="" coords="581,473,796,544"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#af2e2d618f056bb68089c7252fa07d07b" title=" " alt="" coords="573,569,804,625"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1biencoder_1_1BiencoderAgent.html#ac9fa75abc94cb2b53c429a4a3b5a133c" title=" " alt="" coords="859,452,1089,493"/>
<area shape="rect" href="classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#ac698ff0226e4d22f8498a9d9e667a34c" title=" " alt="" coords="895,517,1053,588"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a024c4a0801e7dddf54bf3222dc77eaf6" title=" " alt="" coords="883,612,1065,653"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a1689490829a70677359cf4f49ccd46bb" title=" " alt="" coords="1153,517,1311,573"/>
<area shape="rect" href="classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a07964fbca57736f639fe4e9dd9d1459a" title=" " alt="" coords="1153,597,1311,668"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#afb729d5d51ad91d4188fd1486a4a087f" title=" " alt="" coords="1137,692,1327,733"/>
</map>
</div>
<div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a9039757596f98b45b6676b16589883a3_icgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a9039757596f98b45b6676b16589883a3_icgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a9039757596f98b45b6676b16589883a3_icgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a9039757596f98b45b6676b16589883a3_icgraph">
<area shape="rect" title=" " alt="" coords="232,5,428,61"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#acde404a79bf3678bb52d3e6c3ee5244a" title=" " alt="" coords="5,5,184,61"/>
</map>
</div>

</div>
</div>
<a id="a9b90f2718c85b6373ead4cd207cfd3d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b90f2718c85b6373ead4cd207cfd3d8">&#9670;&nbsp;</a></span>set_interactive_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent.set_interactive_mode </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shared</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Set interactive mode on or off.</pre> 
<p>Reimplemented from <a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a6a7aff29231816a0f3cade9c72409dfc">parlai.core.torch_agent.TorchAgent</a>.</p>

<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00198">198</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">References <a class="el" href="torch__ranker__agent_8py_source.html#l00200">parlai.core.torch_ranker_agent.TorchRankerAgent.candidates</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00201">parlai.core.torch_ranker_agent.TorchRankerAgent.encode_candidate_vecs</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00203">parlai.core.torch_ranker_agent.TorchRankerAgent.eval_candidates</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00205">parlai.core.torch_ranker_agent.TorchRankerAgent.fixed_candidates_path</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00218">parlai.core.torch_ranker_agent.TorchRankerAgent.get_task_candidates_path()</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00204">parlai.core.torch_ranker_agent.TorchRankerAgent.ignore_bad_candidates</a>, <a class="el" href="memnn_2modules__v0_8py_source.html#l00017">parlai.agents.legacy_agents.memnn.modules_v0.MemNN.opt</a>, <a class="el" href="parlai_2agents_2language__model_2modules_8py_source.html#l00018">parlai.agents.language_model.modules.RNNModel.opt</a>, <a class="el" href="rnn__reader_8py_source.html#l00019">parlai.agents.drqa.rnn_reader.RnnDocReader.opt</a>, <a class="el" href="model_8py_source.html#l00024">parlai.agents.drqa.model.DocReaderModel.opt</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00033">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Agent.opt</a>, <a class="el" href="parlai_2agents_2starspace_2modules_8py_source.html#l00036">parlai.agents.starspace.modules.Starspace.opt</a>, <a class="el" href="seq2seq_2modules__v0_8py_source.html#l00040">parlai.agents.legacy_agents.seq2seq.modules_v0.Seq2seq.opt</a>, <a class="el" href="unigram_8py_source.html#l00052">parlai.agents.unigram.unigram.UnigramAgent.opt</a>, <a class="el" href="remote__agent_8py_source.html#l00060">parlai.agents.remote_agent.remote_agent.RemoteAgentAgent.opt</a>, <a class="el" href="parlai_2core_2agents_8py_source.html#l00060">parlai.core.agents.Agent.opt</a>, <a class="el" href="memnn__v0_8py_source.html#l00135">parlai.agents.legacy_agents.memnn.memnn_v0.MemnnAgent.opt</a>, <a class="el" href="parlai_2agents_2transformer_2modules_8py_source.html#l00137">parlai.agents.transformer.modules.TransformerMemNetModel.opt</a>, <a class="el" href="language__model_8py_source.html#l00169">parlai.agents.language_model.language_model.LanguageModelAgent.opt</a>, <a class="el" href="dict__v0_8py_source.html#l00196">parlai.agents.legacy_agents.seq2seq.dict_v0.DictionaryAgent.opt</a>, <a class="el" href="dict__v1_8py_source.html#l00206">parlai.agents.legacy_agents.seq2seq.dict_v1.DictionaryAgent.opt</a>, <a class="el" href="ir__baseline_8py_source.html#l00246">parlai.agents.ir_baseline.ir_baseline.IrBaselineAgent.opt</a>, <a class="el" href="torch__agent__v1_8py_source.html#l00295">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent.opt</a>, <a class="el" href="fairseq_8py_source.html#l00338">parlai.agents.fairseq.fairseq.FairseqAgent.opt</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00373">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.opt</a>, and <a class="el" href="starspace_8py_source.html#l00582">parlai.agents.starspace.starspace.StarspaceAgent.opt</a>.</p>
<div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a9b90f2718c85b6373ead4cd207cfd3d8_cgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a9b90f2718c85b6373ead4cd207cfd3d8_cgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a9b90f2718c85b6373ead4cd207cfd3d8_cgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a9b90f2718c85b6373ead4cd207cfd3d8_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,201,61"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a936cebe646816609dd1d4f56b9490d45" title=" " alt="" coords="249,5,445,61"/>
</map>
</div>

</div>
</div>
<a id="a41c604613a97e566bfcc31667d0dfc6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41c604613a97e566bfcc31667d0dfc6a">&#9670;&nbsp;</a></span>set_vocab_candidates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent.set_vocab_candidates </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shared</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Load the tokens from the vocab as candidates.

self.vocab_candidates will contain a [num_cands] list of strings
self.vocab_candidate_vecs will contain a [num_cands, 1] LongTensor
</pre> 
<p>Reimplemented in <a class="el" href="classparlai_1_1agents_1_1bert__ranker_1_1bi__encoder__ranker_1_1BiEncoderRankerAgent.html#acdfa23a21c8364e7205093a5af51264f">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent</a>.</p>

<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00740">740</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">References <a class="el" href="polyencoder_8py_source.html#l00132">parlai.agents.transformer.polyencoder.PolyencoderAgent._make_candidate_encs()</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00910">parlai.core.torch_ranker_agent.TorchRankerAgent._make_candidate_encs()</a>, <a class="el" href="unigram_8py_source.html#l00056">parlai.agents.unigram.unigram.UnigramAgent.dict</a>, <a class="el" href="seq2seq_2modules__v0_8py_source.html#l00092">parlai.agents.legacy_agents.seq2seq.modules_v0.Seq2seq.dict</a>, <a class="el" href="memnn__v0_8py_source.html#l00102">parlai.agents.legacy_agents.memnn.memnn_v0.MemnnAgent.dict</a>, <a class="el" href="remote__agent_8py_source.html#l00165">parlai.agents.remote_agent.remote_agent.ParsedRemoteAgent.dict</a>, <a class="el" href="language__model_8py_source.html#l00171">parlai.agents.language_model.language_model.LanguageModelAgent.dict</a>, <a class="el" href="torch__agent_8py_source.html#l00174">parlai.core.torch_agent.History.dict</a>, <a class="el" href="starspace_8py_source.html#l00192">parlai.agents.starspace.starspace.StarspaceAgent.dict</a>, <a class="el" href="memnn_2modules__v0_8py_source.html#l00198">parlai.agents.legacy_agents.memnn.modules_v0.Decoder.dict</a>, <a class="el" href="fairseq_8py_source.html#l00208">parlai.agents.fairseq.fairseq._ParlaiTask.dict</a>, <a class="el" href="torch__agent__v1_8py_source.html#l00289">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent.dict</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00375">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.dict</a>, <a class="el" href="fairseq_8py_source.html#l00396">parlai.agents.fairseq.fairseq.FairseqAgent.dict</a>, <a class="el" href="torch__agent_8py_source.html#l00667">parlai.core.torch_agent.TorchAgent.dict</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00201">parlai.core.torch_ranker_agent.TorchRankerAgent.encode_candidate_vecs</a>, <a class="el" href="torch__agent_8py_source.html#l00661">parlai.core.torch_agent.TorchAgent.fp16</a>, <a class="el" href="memnn_2modules__v0_8py_source.html#l00017">parlai.agents.legacy_agents.memnn.modules_v0.MemNN.opt</a>, <a class="el" href="parlai_2agents_2language__model_2modules_8py_source.html#l00018">parlai.agents.language_model.modules.RNNModel.opt</a>, <a class="el" href="rnn__reader_8py_source.html#l00019">parlai.agents.drqa.rnn_reader.RnnDocReader.opt</a>, <a class="el" href="model_8py_source.html#l00024">parlai.agents.drqa.model.DocReaderModel.opt</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00033">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Agent.opt</a>, <a class="el" href="parlai_2agents_2starspace_2modules_8py_source.html#l00036">parlai.agents.starspace.modules.Starspace.opt</a>, <a class="el" href="seq2seq_2modules__v0_8py_source.html#l00040">parlai.agents.legacy_agents.seq2seq.modules_v0.Seq2seq.opt</a>, <a class="el" href="unigram_8py_source.html#l00052">parlai.agents.unigram.unigram.UnigramAgent.opt</a>, <a class="el" href="remote__agent_8py_source.html#l00060">parlai.agents.remote_agent.remote_agent.RemoteAgentAgent.opt</a>, <a class="el" href="parlai_2core_2agents_8py_source.html#l00060">parlai.core.agents.Agent.opt</a>, <a class="el" href="memnn__v0_8py_source.html#l00135">parlai.agents.legacy_agents.memnn.memnn_v0.MemnnAgent.opt</a>, <a class="el" href="parlai_2agents_2transformer_2modules_8py_source.html#l00137">parlai.agents.transformer.modules.TransformerMemNetModel.opt</a>, <a class="el" href="language__model_8py_source.html#l00169">parlai.agents.language_model.language_model.LanguageModelAgent.opt</a>, <a class="el" href="dict__v0_8py_source.html#l00196">parlai.agents.legacy_agents.seq2seq.dict_v0.DictionaryAgent.opt</a>, <a class="el" href="dict__v1_8py_source.html#l00206">parlai.agents.legacy_agents.seq2seq.dict_v1.DictionaryAgent.opt</a>, <a class="el" href="ir__baseline_8py_source.html#l00246">parlai.agents.ir_baseline.ir_baseline.IrBaselineAgent.opt</a>, <a class="el" href="torch__agent__v1_8py_source.html#l00295">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent.opt</a>, <a class="el" href="fairseq_8py_source.html#l00338">parlai.agents.fairseq.fairseq.FairseqAgent.opt</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00373">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.opt</a>, <a class="el" href="starspace_8py_source.html#l00582">parlai.agents.starspace.starspace.StarspaceAgent.opt</a>, <a class="el" href="image__featurizers_8py_source.html#l00024">parlai.core.image_featurizers.ImageLoader.use_cuda</a>, <a class="el" href="memnn_2modules__v0_8py_source.html#l00048">parlai.agents.legacy_agents.memnn.modules_v0.MemNN.use_cuda</a>, <a class="el" href="memnn__v0_8py_source.html#l00096">parlai.agents.legacy_agents.memnn.memnn_v0.MemnnAgent.use_cuda</a>, <a class="el" href="language__model_8py_source.html#l00162">parlai.agents.language_model.language_model.LanguageModelAgent.use_cuda</a>, <a class="el" href="torch__agent__v1_8py_source.html#l00303">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent.use_cuda</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00367">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.use_cuda</a>, <a class="el" href="torch__agent_8py_source.html#l00654">parlai.core.torch_agent.TorchAgent.use_cuda</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00084">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.vocab_candidate_encs</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00750">parlai.core.torch_ranker_agent.TorchRankerAgent.vocab_candidate_encs</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00083">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.vocab_candidate_vecs</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00749">parlai.core.torch_ranker_agent.TorchRankerAgent.vocab_candidate_vecs</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00082">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.vocab_candidates</a>, and <a class="el" href="torch__ranker__agent_8py_source.html#l00748">parlai.core.torch_ranker_agent.TorchRankerAgent.vocab_candidates</a>.</p>

<p class="reference">Referenced by <a class="el" href="torch__ranker__agent_8py_source.html#l00129">parlai.core.torch_ranker_agent.TorchRankerAgent.__init__()</a>.</p>
<div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a41c604613a97e566bfcc31667d0dfc6a_cgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a41c604613a97e566bfcc31667d0dfc6a_cgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a41c604613a97e566bfcc31667d0dfc6a_cgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a41c604613a97e566bfcc31667d0dfc6a_cgraph">
<area shape="rect" title=" " alt="" coords="5,107,201,163"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1polyencoder_1_1PolyencoderAgent.html#a3ed603baccf486a6121f26a962e6dc68" title=" " alt="" coords="249,77,519,119"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#ab7dd6d6207a4736c34620e0c85c396b0" title=" " alt="" coords="295,143,473,199"/>
<area shape="rect" href="classparlai_1_1agents_1_1memnn_1_1memnn_1_1MemnnAgent.html#ab0c47ca129aeec437446202c941e0a56" title=" " alt="" coords="581,5,796,47"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1polyencoder_1_1PolyencoderAgent.html#ae73fe8d98b46a7ef18ef7115f29c999d" title=" " alt="" coords="567,71,811,112"/>
<area shape="rect" href="classparlai_1_1agents_1_1bert__ranker_1_1bi__encoder__ranker_1_1BiEncoderRankerAgent.html#a98361c5172041c64dc2da76ab9b654a7" title=" " alt="" coords="587,136,791,207"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1transformer_1_1TransformerRankerAgent.html#a6067345dff7fefda2809ea3bd63cd8fd" title=" " alt="" coords="569,231,809,287"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a1c8e4925f558783a51a28ccb577c42c7" title=" " alt="" coords="579,311,799,367"/>
</map>
</div>
<div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a41c604613a97e566bfcc31667d0dfc6a_icgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a41c604613a97e566bfcc31667d0dfc6a_icgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a41c604613a97e566bfcc31667d0dfc6a_icgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a41c604613a97e566bfcc31667d0dfc6a_icgraph">
<area shape="rect" title=" " alt="" coords="232,5,428,61"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#acde404a79bf3678bb52d3e6c3ee5244a" title=" " alt="" coords="5,5,184,61"/>
</map>
</div>

</div>
</div>
<a id="a9ba5899b6497645bb6d406ecc2441da7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ba5899b6497645bb6d406ecc2441da7">&#9670;&nbsp;</a></span>share()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent.share </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Share model parameters.</pre> 
<p>Reimplemented from <a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a373f0e276bf7c9d914a4e3363e9c2712">parlai.core.torch_agent.TorchAgent</a>.</p>

<p>Reimplemented in <a class="el" href="classparlai_1_1agents_1_1bert__ranker_1_1bi__encoder__ranker_1_1BiEncoderRankerAgent.html#afbc986c30ae8857d8d4e505a1884b280">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent</a>.</p>

<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00697">697</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">References <a class="el" href="torch__ranker__agent_8py_source.html#l00804">parlai.core.torch_ranker_agent.TorchRankerAgent.fixed_candidate_encs</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00803">parlai.core.torch_ranker_agent.TorchRankerAgent.fixed_candidate_vecs</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00802">parlai.core.torch_ranker_agent.TorchRankerAgent.fixed_candidates</a>, <a class="el" href="model_8py_source.html#l00042">parlai.agents.drqa.model.DocReaderModel.optimizer</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00067">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.optimizer</a>, <a class="el" href="cross__encoder__ranker_8py_source.html#l00092">parlai.agents.bert_ranker.cross_encoder_ranker.CrossEncoderRankerAgent.optimizer</a>, <a class="el" href="bert__classifier_8py_source.html#l00136">parlai.agents.bert_classifier.bert_classifier.BertClassifierAgent.optimizer</a>, <a class="el" href="starspace_8py_source.html#l00261">parlai.agents.starspace.starspace.StarspaceAgent.optimizer</a>, <a class="el" href="language__model_8py_source.html#l00262">parlai.agents.language_model.language_model.LanguageModelAgent.optimizer</a>, <a class="el" href="torch__agent__v1_8py_source.html#l00361">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent.optimizer</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00528">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.optimizer</a>, <a class="el" href="torch__agent_8py_source.html#l00850">parlai.core.torch_agent.TorchAgent.optimizer</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00084">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.vocab_candidate_encs</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00750">parlai.core.torch_ranker_agent.TorchRankerAgent.vocab_candidate_encs</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00083">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.vocab_candidate_vecs</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00749">parlai.core.torch_ranker_agent.TorchRankerAgent.vocab_candidate_vecs</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00082">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.vocab_candidates</a>, and <a class="el" href="torch__ranker__agent_8py_source.html#l00748">parlai.core.torch_ranker_agent.TorchRankerAgent.vocab_candidates</a>.</p>

</div>
</div>
<a id="a05ddf921f386f21116ec0ef50796987a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05ddf921f386f21116ec0ef50796987a">&#9670;&nbsp;</a></span>train_step()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent.train_step </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Train on a single batch of examples.</pre> 
<p>Reimplemented from <a class="el" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a8ba9d535736c0af100d00c5e7b02b61b">parlai.core.torch_agent.TorchAgent</a>.</p>

<p>Reimplemented in <a class="el" href="classself__feeding_1_1self__feeding__agent_1_1SelfFeedingAgent.html#a4f04842d386c1747eefba384966687de">self_feeding.self_feeding_agent.SelfFeedingAgent</a>.</p>

<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00335">335</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">References <a class="el" href="torch__ranker__agent_8py_source.html#l00483">parlai.core.torch_ranker_agent.TorchRankerAgent._build_candidates()</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00250">parlai.core.torch_ranker_agent.TorchRankerAgent._get_batch_train_metrics()</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00270">parlai.core.torch_ranker_agent.TorchRankerAgent._get_train_preds()</a>, <a class="el" href="torch__agent_8py_source.html#l01779">parlai.core.torch_agent.TorchAgent.backward()</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00200">parlai.core.torch_ranker_agent.TorchRankerAgent.candidates</a>, <a class="el" href="dummy__torch__agent_8py_source.html#l00080">parlai.agents.test_agents.dummy_torch_agent.MockTorchAgent.criterion</a>, <a class="el" href="example__seq2seq_8py_source.html#l00161">parlai.agents.example_seq2seq.example_seq2seq.ExampleSeq2seqAgent.criterion</a>, <a class="el" href="starspace_8py_source.html#l00214">parlai.agents.starspace.starspace.StarspaceAgent.criterion</a>, <a class="el" href="language__model_8py_source.html#l00248">parlai.agents.language_model.language_model.LanguageModelAgent.criterion</a>, <a class="el" href="seq2seq__v1_8py_source.html#l00257">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.criterion</a>, <a class="el" href="fairseq_8py_source.html#l00353">parlai.agents.fairseq.fairseq.FairseqAgent.criterion</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00496">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.criterion</a>, <a class="el" href="torch__agent_8py_source.html#l00690">parlai.core.torch_agent.TorchAgent.criterion</a>, <a class="el" href="language__model_8py_source.html#l00159">parlai.agents.language_model.language_model.LanguageModelAgent.metrics</a>, <a class="el" href="parlai_2core_2agents_8py_source.html#l00192">parlai.core.agents.Teacher.metrics</a>, <a class="el" href="fairseq_8py_source.html#l00222">parlai.agents.fairseq.fairseq.FairseqAgent.metrics</a>, <a class="el" href="seq2seq__v1_8py_source.html#l00231">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.metrics</a>, <a class="el" href="metrics_8py_source.html#l00237">parlai.core.metrics.Metrics.metrics</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00351">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.metrics</a>, <a class="el" href="torch__agent_8py_source.html#l00678">parlai.core.torch_agent.TorchAgent.metrics</a>, <a class="el" href="crossencoder_8py_source.html#l00028">parlai.agents.transformer.crossencoder.CrossencoderAgent.model</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00050">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.model</a>, <a class="el" href="cross__encoder__ranker_8py_source.html#l00074">parlai.agents.bert_ranker.cross_encoder_ranker.CrossEncoderRankerAgent.model</a>, <a class="el" href="dummy__torch__agent_8py_source.html#l00079">parlai.agents.test_agents.dummy_torch_agent.MockTorchAgent.model</a>, <a class="el" href="polyencoder_8py_source.html#l00099">parlai.agents.transformer.polyencoder.PolyencoderAgent.model</a>, <a class="el" href="memnn__v0_8py_source.html#l00104">parlai.agents.legacy_agents.memnn.memnn_v0.MemnnAgent.model</a>, <a class="el" href="drqa_8py_source.html#l00123">parlai.agents.drqa.drqa.DrqaAgent.model</a>, <a class="el" href="language__model_8py_source.html#l00173">parlai.agents.language_model.language_model.LanguageModelAgent.model</a>, <a class="el" href="transformer_8py_source.html#l00185">parlai.agents.transformer.transformer.TransformerRankerAgent.model</a>, <a class="el" href="starspace_8py_source.html#l00193">parlai.agents.starspace.starspace.StarspaceAgent.model</a>, <a class="el" href="seq2seq__v1_8py_source.html#l00230">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.model</a>, <a class="el" href="fairseq_8py_source.html#l00354">parlai.agents.fairseq.fairseq.FairseqAgent.model</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00381">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.model</a>, <a class="el" href="torch__agent_8py_source.html#l00689">parlai.core.torch_agent.TorchAgent.model</a>, <a class="el" href="memnn_2modules__v0_8py_source.html#l00017">parlai.agents.legacy_agents.memnn.modules_v0.MemNN.opt</a>, <a class="el" href="parlai_2agents_2language__model_2modules_8py_source.html#l00018">parlai.agents.language_model.modules.RNNModel.opt</a>, <a class="el" href="rnn__reader_8py_source.html#l00019">parlai.agents.drqa.rnn_reader.RnnDocReader.opt</a>, <a class="el" href="model_8py_source.html#l00024">parlai.agents.drqa.model.DocReaderModel.opt</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00033">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Agent.opt</a>, <a class="el" href="parlai_2agents_2starspace_2modules_8py_source.html#l00036">parlai.agents.starspace.modules.Starspace.opt</a>, <a class="el" href="seq2seq_2modules__v0_8py_source.html#l00040">parlai.agents.legacy_agents.seq2seq.modules_v0.Seq2seq.opt</a>, <a class="el" href="unigram_8py_source.html#l00052">parlai.agents.unigram.unigram.UnigramAgent.opt</a>, <a class="el" href="parlai_2core_2agents_8py_source.html#l00060">parlai.core.agents.Agent.opt</a>, <a class="el" href="remote__agent_8py_source.html#l00060">parlai.agents.remote_agent.remote_agent.RemoteAgentAgent.opt</a>, <a class="el" href="memnn__v0_8py_source.html#l00135">parlai.agents.legacy_agents.memnn.memnn_v0.MemnnAgent.opt</a>, <a class="el" href="parlai_2agents_2transformer_2modules_8py_source.html#l00137">parlai.agents.transformer.modules.TransformerMemNetModel.opt</a>, <a class="el" href="language__model_8py_source.html#l00169">parlai.agents.language_model.language_model.LanguageModelAgent.opt</a>, <a class="el" href="dict__v0_8py_source.html#l00196">parlai.agents.legacy_agents.seq2seq.dict_v0.DictionaryAgent.opt</a>, <a class="el" href="dict__v1_8py_source.html#l00206">parlai.agents.legacy_agents.seq2seq.dict_v1.DictionaryAgent.opt</a>, <a class="el" href="ir__baseline_8py_source.html#l00246">parlai.agents.ir_baseline.ir_baseline.IrBaselineAgent.opt</a>, <a class="el" href="torch__agent__v1_8py_source.html#l00295">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent.opt</a>, <a class="el" href="fairseq_8py_source.html#l00338">parlai.agents.fairseq.fairseq.FairseqAgent.opt</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00373">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.opt</a>, <a class="el" href="starspace_8py_source.html#l00582">parlai.agents.starspace.starspace.StarspaceAgent.opt</a>, <a class="el" href="crossencoder_8py_source.html#l00059">parlai.agents.transformer.crossencoder.CrossencoderAgent.score_candidates()</a>, <a class="el" href="cross__encoder__ranker_8py_source.html#l00099">parlai.agents.bert_ranker.cross_encoder_ranker.CrossEncoderRankerAgent.score_candidates()</a>, <a class="el" href="memnn_8py_source.html#l00120">parlai.agents.memnn.memnn.MemnnAgent.score_candidates()</a>, <a class="el" href="polyencoder_8py_source.html#l00148">parlai.agents.transformer.polyencoder.PolyencoderAgent.score_candidates()</a>, <a class="el" href="bi__encoder__ranker_8py_source.html#l00169">parlai.agents.bert_ranker.bi_encoder_ranker.BiEncoderRankerAgent.score_candidates()</a>, <a class="el" href="torch__ranker__agent_8py_source.html#l00235">parlai.core.torch_ranker_agent.TorchRankerAgent.score_candidates()</a>, <a class="el" href="transformer_8py_source.html#l00241">parlai.agents.transformer.transformer.TransformerRankerAgent.score_candidates()</a>, <a class="el" href="example__seq2seq_8py_source.html#l00184">parlai.agents.example_seq2seq.example_seq2seq.ExampleSeq2seqAgent.update_params()</a>, <a class="el" href="language__model_8py_source.html#l00323">parlai.agents.language_model.language_model.LanguageModelAgent.update_params()</a>, <a class="el" href="seq2seq__v1_8py_source.html#l00340">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.update_params()</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00612">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.update_params()</a>, <a class="el" href="torch__agent_8py_source.html#l01796">parlai.core.torch_agent.TorchAgent.update_params()</a>, <a class="el" href="example__seq2seq_8py_source.html#l00179">parlai.agents.example_seq2seq.example_seq2seq.ExampleSeq2seqAgent.zero_grad()</a>, <a class="el" href="language__model_8py_source.html#l00319">parlai.agents.language_model.language_model.LanguageModelAgent.zero_grad()</a>, <a class="el" href="seq2seq__v1_8py_source.html#l00336">parlai.agents.legacy_agents.seq2seq.seq2seq_v1.Seq2seqAgent.zero_grad()</a>, <a class="el" href="seq2seq__v0_8py_source.html#l00608">parlai.agents.legacy_agents.seq2seq.seq2seq_v0.Seq2seqAgent.zero_grad()</a>, and <a class="el" href="torch__agent_8py_source.html#l01846">parlai.core.torch_agent.TorchAgent.zero_grad()</a>.</p>

<p class="reference">Referenced by <a class="el" href="projects_2image__chat_2transresnet__multimodal_2transresnet__multimodal_8py_source.html#l00243">transresnet_multimodal.transresnet_multimodal.TransresnetMultimodalAgent.batch_act()</a>, and <a class="el" href="projects_2personality__captions_2transresnet_2transresnet_8py_source.html#l00288">transresnet.transresnet.TransresnetAgent.batch_act()</a>.</p>
<div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a05ddf921f386f21116ec0ef50796987a_cgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a05ddf921f386f21116ec0ef50796987a_cgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a05ddf921f386f21116ec0ef50796987a_cgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a05ddf921f386f21116ec0ef50796987a_cgraph">
<area shape="rect" title=" " alt="" coords="5,785,240,826"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#ac09793435e7b982a8b658411ca0b4502" title=" " alt="" coords="331,5,509,61"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#ae30028148e8c5bd7ef9a9f0a25ca8f22" title=" " alt="" coords="331,85,509,141"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#af07f02ac90d3d11c572d0c5c0b1ed9de" title=" " alt="" coords="331,165,509,221"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a8df662b1258ec67752b4fc0ad45733f9" title=" " alt="" coords="341,246,499,287"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1crossencoder_1_1CrossencoderAgent.html#a5c286ce0bc163e443e73182f95d6e0c6" title=" " alt="" coords="294,311,546,353"/>
<area shape="rect" href="classparlai_1_1agents_1_1bert__ranker_1_1cross__encoder__ranker_1_1CrossEncoderRankerAgent.html#a8d75c4d4bddd44381b232a974469c432" title=" " alt="" coords="288,377,552,447"/>
<area shape="rect" href="classparlai_1_1agents_1_1memnn_1_1memnn_1_1MemnnAgent.html#a10b5418eda4da7bc85913e24e5b5a029" title=" " alt="" coords="317,471,523,513"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1polyencoder_1_1PolyencoderAgent.html#ad75794f4004267ab538258bc2571235f" title=" " alt="" coords="298,537,542,578"/>
<area shape="rect" href="classparlai_1_1agents_1_1bert__ranker_1_1bi__encoder__ranker_1_1BiEncoderRankerAgent.html#ac8141b70cff9c26b945d112ad53b035c" title=" " alt="" coords="323,602,517,673"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a65d5726a4e2098212298bc2cdf13e70f" title=" " alt="" coords="315,697,525,753"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1transformer_1_1TransformerRankerAgent.html#af1af764f534c04a7bc98f11b3fe8f6ca" title=" " alt="" coords="300,777,540,833"/>
<area shape="rect" href="classparlai_1_1agents_1_1example__seq2seq_1_1example__seq2seq_1_1ExampleSeq2seqAgent.html#a982862ee1a5b6ee2a7da61d6018fb4a9" title=" " alt="" coords="299,857,541,913"/>
<area shape="rect" href="classparlai_1_1agents_1_1language__model_1_1language__model_1_1LanguageModelAgent.html#af474c46339e2e0c881f8b8b81f5f9b7f" title=" " alt="" coords="309,937,531,993"/>
<area shape="rect" href="classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#a3fabaacec11534b452a1786d3dd5a6c8" title=" " alt="" coords="307,1017,533,1073"/>
<area shape="rect" href="classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent.html#a3933d4fdc5e603b1a168d92e7da77151" title=" " alt="" coords="307,1097,533,1153"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a7e2c9e180887397daa6229a0f9700b1c" title=" " alt="" coords="329,1178,511,1219"/>
<area shape="rect" href="classparlai_1_1agents_1_1example__seq2seq_1_1example__seq2seq_1_1ExampleSeq2seqAgent.html#a334f6bd6a11dba7b87f7ea0f8db23a42" title=" " alt="" coords="299,1244,541,1300"/>
<area shape="rect" href="classparlai_1_1agents_1_1language__model_1_1language__model_1_1LanguageModelAgent.html#ad7b6363acdfb3d009cd9a3bcc6206faf" title=" " alt="" coords="309,1324,531,1380"/>
<area shape="rect" href="classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v1_1_1Seq2seqAgent.html#af2e9c4d06f55802308dbfedfea69d0cd" title=" " alt="" coords="323,1404,517,1460"/>
<area shape="rect" href="classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1seq2seq__v0_1_1Seq2seqAgent.html#a0be9f1e378a403284d8afac5648fbf4d" title=" " alt="" coords="323,1484,517,1540"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a91c163f3e2d39b380095b7083f673b6e" title=" " alt="" coords="341,1565,499,1606"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a42cd79a3d59c402422eca36285b2cd05" title=" " alt="" coords="631,5,809,61"/>
<area shape="rect" href="classparlai_1_1agents_1_1memnn_1_1memnn_1_1MemnnAgent.html#acee74d75f53f79b7c3e2ea83fa2b2e71" title=" " alt="" coords="623,471,817,513"/>
<area shape="rect" href="classparlai_1_1agents_1_1memnn_1_1memnn_1_1MemnnAgent.html#addba7308e8338d9bcab4ff49d5bbcfe5" title=" " alt="" coords="623,627,817,669"/>
<area shape="rect" href="classparlai_1_1agents_1_1memnn_1_1memnn_1_1MemnnAgent.html#a6639dabbc921ce131de09f1228979d2f" title=" " alt="" coords="888,471,1083,513"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1transformer_1_1TransformerRankerAgent.html#abdb49353d8bbff5e235dcd84a7b75844" title=" " alt="" coords="600,785,840,826"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a5ce58a7b3ce88ac87cc1b7f7316ae9c4" title=" " alt="" coords="619,1178,821,1219"/>
</map>
</div>
<div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a05ddf921f386f21116ec0ef50796987a_icgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a05ddf921f386f21116ec0ef50796987a_icgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a05ddf921f386f21116ec0ef50796987a_icgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_a05ddf921f386f21116ec0ef50796987a_icgraph">
<area shape="rect" title=" " alt="" coords="663,72,897,113"/>
<area shape="rect" href="classtransresnet__multimodal_1_1transresnet__multimodal_1_1TransresnetMultimodalAgent.html#a057eb1109f5c2ea467539083e2f7e7f6" title=" " alt="" coords="292,104,615,145"/>
<area shape="rect" href="classtransresnet_1_1transresnet_1_1TransresnetAgent.html#a5eadf6ccc4b1d15a520a70d111bff493" title=" " alt="" coords="360,39,547,80"/>
<area shape="rect" href="classtransresnet_1_1transresnet_1_1TransresnetAgent.html#ad59fea461b2ea1f9731742901203bdd7" title=" " alt="" coords="45,5,205,47"/>
<area shape="rect" href="classmastering__the__dungeon_1_1agents_1_1graph__world2_1_1agents_1_1ModelAgentBase.html#a768f25fa424b2cd4d1de8e62bfed970a" title=" " alt="" coords="5,71,244,112"/>
<area shape="rect" href="classagent_1_1memnn__feedback_1_1MemnnFeedbackAgent.html#ab221141e0a956be465e718bb349e7554" title=" " alt="" coords="21,136,229,177"/>
<area shape="rect" href="classkvmemnn_1_1KvmemnnAgent.html#a6f57723b871277392a3f3fd627c717d8" title=" " alt="" coords="25,202,224,229"/>
</map>
</div>

</div>
</div>
<a id="af2e2d618f056bb68089c7252fa07d07b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2e2d618f056bb68089c7252fa07d07b">&#9670;&nbsp;</a></span>vectorize_fixed_candidates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parlai.core.torch_ranker_agent.TorchRankerAgent.vectorize_fixed_candidates </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cands_batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>add_start</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>add_end</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Convert a batch of candidates from text to vectors.

:param cands_batch:
    a [batchsize] list of candidates (strings)
:returns:
    a [num_cands] list of candidate vectors

By default, candidates are simply vectorized (tokens replaced by token ids).
A child class may choose to overwrite this method to perform vectorization as
well as encoding if so desired.
</pre> 
<p class="definition">Definition at line <a class="el" href="torch__ranker__agent_8py_source.html#l00930">930</a> of file <a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a>.</p>

<p class="reference">References <a class="el" href="biencoder_8py_source.html#l00025">parlai.agents.transformer.biencoder.BiencoderAgent._vectorize_text()</a>, <a class="el" href="projects_2wizard__of__wikipedia_2generator_2agents_8py_source.html#l00100">generator.agents.EndToEndAgent._vectorize_text</a>, <a class="el" href="torch__agent__v1_8py_source.html#l00513">parlai.agents.legacy_agents.seq2seq.torch_agent_v1.TorchAgent._vectorize_text()</a>, <a class="el" href="torch__agent_8py_source.html#l01237">parlai.core.torch_agent.TorchAgent._vectorize_text()</a>, and <a class="el" href="torch__agent_8py_source.html#l00728">parlai.core.torch_agent.TorchAgent.label_truncate</a>.</p>

<p class="reference">Referenced by <a class="el" href="torch__ranker__agent_8py_source.html#l00875">parlai.core.torch_ranker_agent.TorchRankerAgent._make_candidate_vecs()</a>.</p>
<div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_af2e2d618f056bb68089c7252fa07d07b_cgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_af2e2d618f056bb68089c7252fa07d07b_cgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_af2e2d618f056bb68089c7252fa07d07b_cgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_af2e2d618f056bb68089c7252fa07d07b_cgraph">
<area shape="rect" title=" " alt="" coords="5,78,236,134"/>
<area shape="rect" href="classparlai_1_1agents_1_1transformer_1_1biencoder_1_1BiencoderAgent.html#ac9fa75abc94cb2b53c429a4a3b5a133c" title=" " alt="" coords="284,5,515,47"/>
<area shape="rect" href="classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#ac698ff0226e4d22f8498a9d9e667a34c" title=" " alt="" coords="321,71,478,141"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a024c4a0801e7dddf54bf3222dc77eaf6" title=" " alt="" coords="308,165,491,207"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#a1689490829a70677359cf4f49ccd46bb" title=" " alt="" coords="578,70,737,126"/>
<area shape="rect" href="classparlai_1_1agents_1_1legacy__agents_1_1seq2seq_1_1torch__agent__v1_1_1TorchAgent.html#a07964fbca57736f639fe4e9dd9d1459a" title=" " alt="" coords="579,151,736,221"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__agent_1_1TorchAgent.html#afb729d5d51ad91d4188fd1486a4a087f" title=" " alt="" coords="563,245,752,287"/>
</map>
</div>
<div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_af2e2d618f056bb68089c7252fa07d07b_icgraph.png" border="0" usemap="#classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_af2e2d618f056bb68089c7252fa07d07b_icgraph" alt=""/></div>
<map name="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_af2e2d618f056bb68089c7252fa07d07b_icgraph" id="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent_af2e2d618f056bb68089c7252fa07d07b_icgraph">
<area shape="rect" title=" " alt="" coords="703,5,933,61"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#aeceb8a86a165dd9f97b9f8270462a828" title=" " alt="" coords="476,5,655,61"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#a9039757596f98b45b6676b16589883a3" title=" " alt="" coords="232,5,428,61"/>
<area shape="rect" href="classparlai_1_1core_1_1torch__ranker__agent_1_1TorchRankerAgent.html#acde404a79bf3678bb52d3e6c3ee5244a" title=" " alt="" coords="5,5,184,61"/>
</map>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>ParlAI/parlai/core/<a class="el" href="torch__ranker__agent_8py_source.html">torch_ranker_agent.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
