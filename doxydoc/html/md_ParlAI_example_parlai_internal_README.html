<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ParlAI: Internal subfolder</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ParlAI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Internal subfolder </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>By creating an internal subfolder, you can set up your own custom agents and tasks, create your own model zoo, and manage it all with a separate git repository. We've set it up so you can now work inside the ParlAI folder without the risk of accidentally pushing your work to the public ParlAI repo. We've also added some convenient shortcuts to mirror what we provide in the <code>parlai</code> folder.</p>
<h1><a class="anchor" id="autotoc_md9"></a>
How to</h1>
<p>Start by creating a new folder named parlai_internal and copying the contents of this folder. (We've added this to .gitignore already.)</p>
<div class="fragment"><div class="line">cd ~/ParlAI</div>
<div class="line">mkdir parlai_internal</div>
<div class="line">cp -r example_parlai_internal/ parlai_internal</div>
<div class="line">cd parlai_internal</div>
</div><!-- fragment --><p>We've ignored this folder, but that's it. If you want to set this up as a separate git repository (e.g. for version control) you can follow the standard steps for creating a new repo (feel free to do this however you prefer).</p>
<div class="fragment"><div class="line">git init</div>
<div class="line">git add .</div>
<div class="line">git commit -m &quot;Initialize parlai_internal&quot;</div>
</div><!-- fragment --><p>You can connect this to a new github repository if desired. <a href="https://github.com/new">Create a new repo</a> (you don't need to initialize with a README), and then follow the instructions to push an existing repository from command line.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
Some features</h1>
<p>We also provide a number of shortcuts which mirror the public repo.</p>
<p>You can do <code>from parlai_internal.X.Y import Z</code> to use your custom modules.</p>
<p>Additionally, you can invoke your internal model agents from command line with <code>-m internal:model</code>. Providing this argument will cause the parser to look for <code>parlai_internal.agents.model.model.ModelAgent</code>. As an example, we provide <code><a class="el" href="parrot_8py_source.html">parlai_internal/agents/parrot/parrot.py</a></code>. You could call (from the top-level ParlAI folder):</p>
<div class="fragment"><div class="line">python examples/display_model.py -t babi:task10k:1 -m internal:parrot</div>
</div><!-- fragment --><p>Similarly, you can add private tasks under a tasks folder here and invoke them with <code>-t internal:taskname</code>. The parser will look for <code>parlai_internal.tasks.taskname.taskname.DefaultTeacher</code>.</p>
<p>You can even create your own model zoo of pretrained models. <code>parlai_internal/zoo/.internal_zoo_path</code> needs to be modified to contain the path to the folder containing all of your models. Once you've done that, you can use those models by simply adding <code>-mf /rest/of/modelfilepath</code>. For example, if you change <code>.internal_zoo_path</code> to be <code>/private/home/user/checkpoints</code> and you have a model at <code>/private/home/user/checkpoints/model_file/model</code>, you could use <code>-mf izoo:model_file/model</code>.</p>
<p>And you can use as many of these in combination as you would like. For instance, to evaluate a model file that uses an internal agent definition on an internal task, you would do:</p>
<div class="fragment"><div class="line">python examples/eval_model.py -t internal:taskname -m internal:model -mf izoo:model_file/model</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
